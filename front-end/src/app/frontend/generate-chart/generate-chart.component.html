<app-header
  [redirect]="redirect"
  (childMessage)="showMessageFromChild($event)"
  (curMessage)="showMessageFromCur($event)"
></app-header>

<div class="Wrraper" [ngStyle]="{ 'min-height': innerHeight }">
  <div class="container expand">
    <div class="generateChart">
      <!-- <app-smallchartjs [lineChartData2]="lineChartData2"></app-smallchartjs> -->
      <ng-template #content let-modal>
        <div class="modal-content" *ngIf="currentHouse">
          <div class="modal-header text-center">
            <h4 class="modal-title" id="modal-basic-title">
              {{ currentHouse.address }}
            </h4>
            <button
              type="button"
              class="close"
              aria-label="Close"
              (click)="modal.dismiss('Cross click')"
            >
              <i class="pi pi-times-circle"></i>
            </button>
          </div>
          <div class="modal-body">
            <ngb-carousel *ngIf="currentHouse.photos.length >= 0">
              <ng-template
                *ngFor="let photos of currentHouse.photos; let i = index"
                ngbSlide
              >
                <div class="picsum-img-wrapper">
                  <img [src]="photos" alt="Random first slide" />
                </div>
              </ng-template>
            </ngb-carousel>
          </div>
          <div class="modal-footer current-house-info">
            <div id="addressInfo">
              <p>
                <span
                  class="chart-dot"
                  [ngClass]="
                    currentHouse.status == 'CLOSED' ||
                    currentHouse.status == 'Closed' ||
                    currentHouse.status == 'Sold'
                      ? 'closed'
                      : currentHouse.status == 'Active' ||
                        currentHouse.status == 'ACTIVE' ||
                        currentHouse.status == 'Active - Coming Soon'
                      ? 'active'
                      : 'pending'
                  "
                  >&nbsp;</span
                >
                {{
                  (currentHouse.status == "Closed"
                    ? chart?.relatedProperty.listing_type == "Rented"
                      ? "NewCharts.Rented"
                      : "NewCharts.Closed"
                    : "Sign Out." + currentHouse.status
                  ) | translate
                }}
              </p>
              <p>{{ currentHouse.address }}</p>
              <p>MLS #: {{ currentHouse.mlsNumber }}</p>
            </div>
            <div id="vitalInfo">
              <p>
                {{ "Sign Out.Sq Ft" | translate }}:
                {{ currentHouse.squareFootage | number }}
              </p>
              <p>{{ "Sign Out.DOM" | translate }}: {{ currentHouse.days }}</p>
              <p>
                {{ "Charts.List.LPxDOM" | translate }}:
                {{ currentHouse.daysPx }}
              </p>
            </div>
            <div id="additionalInfo">
              <p>{{ "Sign Out.Beds" | translate }}: {{ currentHouse.bed }}</p>
              <p>{{ "Sign Out.Baths" | translate }}: {{ currentHouse.bath }}</p>
              <p>
                {{ "Sign Out.Year Built" | translate }}:
                {{ currentHouse.yearBuilt }}
              </p>
            </div>
            <div id="priceInfo">
              <p *ngIf="currentHouse.listPrice">
                {{ "Sign Out.List Price" | translate }}:
                {{ currentHouse.listPrice | convert: currentcurrency:"1.0-2" }}
              </p>
              <p
                *ngIf="
                  currentHouse.status != 'Active' &&
                  currentHouse.status != 'Pending' &&
                  currentHouse.status !== 'Under Contract' &&
                  currentHouse.status !== 'Active Contingent' &&
                  currentHouse.status !== 'Contingent' &&
                  currentHouse.status !== 'Active Option Contract'
                "
              >
                {{
                  (chart.relatedProperty.listing_type == "Rental"
                    ? "Charts.Chart.Rented Price"
                    : "Charts.Chart.Sales Price"
                  ) | translate
                }}:
                {{ currentHouse.closePrice | convert: currentcurrency:"1.0-2" }}
              </p>
              <p
                *ngIf="
                  currentHouse.status != 'Active' &&
                  currentHouse.status != 'Pending' &&
                  currentHouse.status !== 'Under Contract' &&
                  currentHouse.status !== 'Active Contingent' &&
                  currentHouse.status !== 'Contingent' &&
                  currentHouse.status !== 'Active Option Contract'
                "
              >
                {{
                  (chart.relatedProperty.listing_type == "Rental"
                    ? "Charts.Chart.Rented Date"
                    : "Charts.Chart.Sales Date"
                  ) | translate
                }}:
                {{ currentHouse.saleDate | date: "MM/dd/yy" }}
              </p>
            </div>
          </div>
          <div
            class="modal-footer text-right"
            *ngIf="
              !isSeven ||
              currentHouse.status === 'Active' ||
              currentHouse.status === 'Pending'
            "
          >
            <button
              type="button"
              class="btn btn-danger"
              (click)="deleteFromChart(currentHouse.mlsNumber)"
            >
              {{ "Sign Out.Delete" | translate }}
            </button>
          </div>
          <div
            class="modal-footer text-right"
            *ngIf="
              isSeven &&
              currentHouse.status != 'Active' &&
              currentHouse.status != 'Pending'
            "
          >
            <i style="color: red" class="pi pi-exclamation-triangle"></i>
            <div class="overlay">
              <h6>{{ "Sign Out.Cannot Delete" | translate }}</h6>
              <p *ngIf="rentalChartDisplay">
                {{ "Sign Out.Cannot DeleteTextRent" | translate }}
              </p>
              <p *ngIf="!rentalChartDisplay">
                {{ "Sign Out.Cannot DeleteText" | translate }}
              </p>
            </div>
          </div>
          <div *ngIf="beachesFlag" class="row no-gutters">
            <div class="col-12">
              <div class="beachMLS">
                <p>
                  Licensed Data Source and Copyright 2020 Beaches MLS, Inc.,
                  Inc.
                </p>
              </div>
            </div>
          </div>
        </div>
      </ng-template>

      <ng-template #email let-modal>
        <div class="modal-content">
          <div class="modal-header text-center">
            <h4 class="modal-title" id="modal-basic-title">Email Chart</h4>
            <button
              type="button"
              class="close"
              aria-label="Close"
              (click)="modal.dismiss('Cross click')"
            >
              <i class="pi pi-times-circle"></i>
            </button>
          </div>
          <div class="modal-body">
            <form [formGroup]="emailUser" (ngSubmit)="emailUserSubmit()">
              <div class="form-group" *ngIf="showMsgSuccess">
                <div class="col-xs-12">
                  <p class="alert alert-success">
                    <strong
                      >Your chart has been sent to your recipients!</strong
                    >
                  </p>
                </div>
              </div>
              <div class="form-group" *ngIf="showMsgError">
                <div class="col-xs-12">
                  <p class="alert alert-danger">
                    <strong
                      >Error sending email. Double check that your client info
                      is correct or try again in a few minutes</strong
                    >
                  </p>
                </div>
              </div>
              <div class="form-group">
                <label>To:</label>
                <input
                  type="email"
                  name="email"
                  formControlName="email"
                  class="form-control"
                />
              </div>
              <div class="form-group">
                <div>
                  <input
                    type="checkbox"
                    id="emailCopyCheck"
                    (click)="setEmailCopy()"
                  /><span>&nbsp;<b>*Send me a copy</b></span>
                </div>
              </div>
              <div class="form-group">
                <label>Subject:</label>
                <input
                  type="text"
                  name="subject"
                  formControlName="subject"
                  class="form-control"
                />
              </div>
              <div class="form-group">
                <label>Message:</label>
                <textarea
                  name="message"
                  formControlName="message"
                  class="form-control"
                ></textarea>
              </div>
              <div class="form-group">
                <div class="modal-footer">
                  <input
                    type="button"
                    class="btn btn-default pull-left"
                    (click)="clearEmail()"
                    value="DISCARD"
                  />
                  <input
                    type="submit"
                    [disabled]="!emailUser.valid"
                    class="btn btn-success"
                    value="SEND"
                  />
                </div>
              </div>
            </form>
          </div>
        </div>
      </ng-template>

      <div class="generateChart_bar noprint">
        <table class="table">
          <tbody>
            <tr *ngIf="chart">
              <td>
                <a
                  *ngIf="
                    !samlFlag && accessToken && chart.userId == accessToken._id
                  "
                  (click)="modifySearch()"
                  class="
                    btn btn-primary
                    float-left
                    d-none d-sm-none d-md-none d-lg-block d-print-none
                  "
                >
                  <i class="pi pi-angle-left"></i>
                  {{ "Charts.Modify Search" | translate }}
                </a>
                <!-- [routerLink]="['/analysis/redirectBackToAnalysis']"  -->

                <div
                  class="generateChart_list mw300"
                >
                  <div class="showft">
                    <div class="input-group">
                      <div class="input-group-prepend">
                        <span class="input-group-text"
                          ><i class="pi pi-user"></i
                        ></span>
                        <div class="tooltip">
                          <h6>
                            {{
                              "Property.AddProperty.Select client" | translate
                            }}
                          </h6>
                        </div>
                      </div>
                      <div class="ddInput">
                        <ul class="Client_type">
                          <li class="dropdown Commontooltipwrp">
                            <a
                              href="javascript:void(0)"
                              class="dropdown-toggle"
                              data-toggle="dropdown"
                            >
                              {{ groupNameClient }}
                            </a>
                            <input type="hidden" />
                            <ul class="dropdown-menu">
                              <li
                                *ngFor="let client of clients"
                                (click)="selectClientNew(client)"
                              >
                                <a href="javascript:void(0)"
                                  >{{ client.firstname }} {{ client.lastname }}
                                  <span
                                    >{{ client.email }} {{ client.phone }}</span
                                  ></a
                                >
                              </li>
                              <li *ngIf="clients.length == 0">
                                No Data Found.
                              </li>
                            </ul>
                            <a class="clearSelect" (click)="clearClientNew()"
                              ><i class="pi pi-times-circle"></i
                            ></a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                </div>
              </td>
              <td>
                <h2
                  [innerHTML]="'Charts.APC Estimated Market Value' | translate"
                ></h2>
              </td>
              <td>
                <a
                  *ngIf="accessToken || !samlFlag"
                  [routerLink]="[
                    '/new-chart/property-value-analysis/' + currentId
                  ]"
                  class="
                    btn btn-primary
                    float-left
                    d-block d-sm-block d-md-block d-lg-none d-print-none
                  "
                >
                  <i class="pi pi-angle-left"></i>
                  {{ "Charts.Modify Search" | translate }}
                </a>

                <a
                  *ngIf="redirect"
                  (click)="backtoanalysis()"
                  class="
                    btn btn-primary
                    float-right
                    d-none d-sm-none d-md-none d-lg-block d-print-none
                  "
                >
                  {{ "Charts.Go To Investment Analysis" | translate }}
                  <i class="pi pi-angle-right"></i
                ></a>

                <button
                  *ngIf="!redirect"
                  (click)="printButton()"
                  type="button"
                  class="btn btn-primary d-print-none"
                >
                  <i class="pi pi-print"></i>
                  {{ "Charts.Print" | translate }}
                  <div class="tooltip">
                    <h6>{{ "Charts.Print Tooltip" | translate }}</h6>
                  </div>
                </button>
                <!-- <button *ngIf="accessToken && !redirect" (click)="emailButton()" type="button"
                  class="btn btn-primary d-print-none"><i class="pi pi-envelope"></i>
                  {{ 'Charts.Email' | translate }}</button> -->
                <div *ngIf="accessToken" class="shareBtn d-print-none">
                  <button
                    type="button"
                    (click)="sharePopup()"
                    class="btn btn-primary"
                  >
                    <i class="pi pi-share-alt mr-2"></i>Share
                  </button>
                </div>

                <ng-template #sharepopup let-modal>
                  <div class="modal-content">
                    <div class="modal-header text-center">
                      <h4 class="modal-title" id="modal-basic-title">
                        Social Media Sharing
                      </h4>
                      <button
                        type="button"
                        class="close"
                        aria-label="Close"
                        (click)="modal.dismiss('Cross click')"
                      >
                        <i class="pi pi-times-circle"></i>
                      </button>
                    </div>
                    <div class="modal-body">
                      <form
                        [formGroup]="sharePopupForm"
                        (ngSubmit)="sharePopupSubmit()"
                      >
                        <div class="row">
                          <div class="col-12 col-sm-6">
                            <div class="form-group">
                              <label
                                >{{ "Sign Out.Available" | translate }}:</label
                              >
                              <input
                                type="text"
                                formControlName="available"
                                class="form-control"
                              />
                            </div>
                            <div class="form-group">
                              <label
                                [innerHTML]="
                                  'My Account.cmaIQ Price2' | translate
                                "
                              ></label>
                              <input
                                type="text"
                                formControlName="price"
                                class="form-control"
                              />
                            </div>
                            <div class="row">
                              <div class="col-6">
                                <div class="form-group">
                                  <label
                                    >{{ "Sign Out.Baths" | translate }}:</label
                                  >
                                  <input
                                    type="number"
                                    formControlName="baths"
                                    class="form-control"
                                  />
                                </div>
                              </div>
                              <div class="col-6">
                                <div class="form-group">
                                  <label
                                    >{{ "Sign Out.Beds" | translate }}:</label
                                  >
                                  <input
                                    type="number"
                                    formControlName="beds"
                                    class="form-control"
                                  />
                                </div>
                              </div>
                            </div>
                            <div class="form-group">
                              <label>{{ "Sign Out.Agent" | translate }}:</label>
                              <input
                                type="text"
                                formControlName="agent_name"
                                class="form-control"
                              />
                            </div>
                            <div class="form-group">
                              <label
                                >{{
                                  "Sign Out.Agent email" | translate
                                }}:</label
                              >
                              <input
                                type="email"
                                formControlName="agent_email"
                                class="form-control"
                              />
                            </div>
                            <div class="form-group">
                              <label
                                >{{ "Sign Out.Website" | translate }}:</label
                              >
                              <input
                                type="text"
                                formControlName="webiste"
                                class="form-control"
                              />
                            </div>
                          </div>
                          <div class="col-12 col-sm-6">
                            <div class="form-group">
                              <label>{{ "Address" | translate }}:</label>
                              <input
                                type="text"
                                formControlName="address"
                                class="form-control"
                              />
                            </div>
                            <div class="form-group">
                              <label>{{ "Sign Out.SQFT" | translate }}:</label>
                              <input
                                type="text"
                                formControlName="sqft"
                                class="form-control"
                              />
                            </div>
                            <div class="form-group">
                              <label
                                >{{
                                  "Sign Out.Agent phone" | translate
                                }}:</label
                              >
                              <input
                                type="text"
                                formControlName="agent_phone"
                                class="form-control"
                              />
                            </div>
                            <div class="form-group">
                              <label
                                >{{ "Sign Out.Agency" | translate }}:</label
                              >
                              <input
                                type="text"
                                formControlName="agency"
                                class="form-control"
                              />
                            </div>
                            <div class="form-group">
                              <label>{{ "Sign Out.Notes" | translate }}:</label>
                              <textarea
                                rows="4"
                                cols="10"
                                formControlName="note"
                                class="form-control noresize"
                              ></textarea>
                            </div>
                          </div>
                        </div>
                        <div class="form-group mb-0">
                          <div class="modal-footer text-right px-0 pb-0">
                            <button
                              type="submit"
                              class="btn btn-success nonF mr-0"
                            >
                              Next
                            </button>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </ng-template>

                <ng-template #sharepopupbtn let-modal>
                  <div class="modal-content">
                    <div class="modal-header text-center">
                      <h4 class="modal-title" id="modal-basic-title">
                        Social Media Buttons
                      </h4>
                      <button
                        type="button"
                        class="close"
                        aria-label="Close"
                        (click)="modal.dismiss('Cross click')"
                      >
                        <i class="pi pi-times-circle"></i>
                      </button>
                    </div>
                    <div class="modal-body">
                      <div class="text-center pb-4">
                        <span>Shared URL:</span> &nbsp;<a
                          target="_blank"
                          href="{{ shareurl }}"
                          >{{ shareurl }}</a
                        >
                      </div>
                      <div class="ddCustomShare text-center">
                        <span class="shareCl fb">
                          <button type="button" (click)="share()">
                            Facebook Share
                          </button>
                        </span>
                        <span class="shareCl tt">
                          <tweet
                            [url]="shareurl"
                            [text]="socialSubject"
                          ></tweet>
                        </span>
                        <span class="shareCl ln">
                          <linkedin-share [url]="shareurl"></linkedin-share>
                        </span>
                        <span
                          *ngIf="accessToken && !redirect"
                          class="shareCl em"
                        >
                          <button
                            (click)="emailButton()"
                            type="button"
                          ></button>
                        </span>
                      </div>
                    </div>
                  </div>
                </ng-template>

                <a
                  *ngIf="active_presentation"
                  href="javascript:void(0)"
                  class="presation"
                  [routerLink]="['/presentation/' + currentId]"
                  ><img src="assets/images/presentation.png" alt="" />
                  Presentation</a
                >
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="generateChart_main bordertop">
        <div *ngIf="!propLegendCheck" class="propertystatus noprint">
          <ul>
            <li (click)="toggleDataset('active')">
              <span [ngClass]="toggles.active ? 'active' : ''"></span
              >{{ "Charts.Active" | translate }} ({{ activeCount }})
            </li>
            <li (click)="toggleDataset('underContract')">
              <span [ngClass]="toggles.underContract ? 'pending' : ''"></span
              >{{ "Charts.Pending" | translate }} ({{ pendingCount }})
            </li>
            <li>
              <span class="closed"></span
              >{{
                (chart?.relatedProperty.listing_type == "Rental"
                  ? "NewCharts.Rented"
                  : "NewCharts.Closed"
                ) | translate
              }}
              ({{ closeCount }})
            </li>
            <li *ngIf="chart">
              <img src="assets/images/house-icon.png" alt="home" width="20" />
              {{
                chart.property_id
                  ? chart.targetProperty.address
                  : chart.chart_title
              }}
            </li>
          </ul>
        </div>

        <div *ngIf="propLegendCheck" class="propertystatus">
          <ul>
            <li (click)="toggleDataset('active')">
              <span [ngClass]="toggles.active ? 'active' : ''"></span
              >{{ "Charts.Active" | translate }} ({{ activeCount }})
            </li>
            <li (click)="toggleDataset('underContract')">
              <span [ngClass]="toggles.underContract ? 'pending' : ''"></span
              >{{ "Charts.Pending" | translate }} ({{ pendingCount }})
            </li>
            <li>
              <span class="closed"></span
              >{{
                (chart?.relatedProperty.listing_type == "Rental"
                  ? "NewCharts.Rented"
                  : "NewCharts.Closed"
                ) | translate
              }}
              ({{ closeCount }})
            </li>
            <li *ngIf="chart">
              <img src="assets/images/house-icon.png" alt="home" width="20" />
              {{
                chart.property_id
                  ? chart.targetProperty.address
                  : chart.chart_title
              }}
            </li>
          </ul>
        </div>

        <div *ngIf="!samlFlag">
          <p *ngIf="!marketLegendCheck" class="monthLegend noprint">
            {{ "Charts.Market Conditions" | translate }} -
            {{ monthValueWhole }}
            {{ "Charts.Months Of Inventory" | translate }} -
            {{ marketTypeText }} {{ "Charts.Market" | translate }}
          </p>
          <p *ngIf="marketLegendCheck" class="monthLegend">
            {{ "Charts.Market Conditions" | translate }} -
            {{ monthValueWhole }}
            {{ "Charts.Months Of Inventory" | translate }} -
            {{ marketTypeText }} {{ "Charts.Market" | translate }}
          </p>
        </div>

        <div class="generateChart_main_tab">
          <nav>
            <div class="nav nav-tabs" id="nav-tab" role="tablist">
              <a
                class="nav-item nav-link active"
                id="nav-chart-tab"
                data-toggle="tab"
                href="#nav-chart"
                role="tab"
                aria-controls="nav-chart"
                aria-selected="true"
                (click)="legendShow()"
                >{{ "Charts.Chart.label" | translate }}</a
              >
              <a
                class="nav-item nav-link"
                id="nav-analytic-tab"
                data-toggle="tab"
                href="#nav-analytic"
                role="tab"
                aria-controls="nav-analytic"
                aria-selected="false"
                (click)="propertyLegendHide()"
                >{{ "Charts.Analytics.label" | translate }}</a
              >
              <a
                class="nav-item nav-link"
                id="nav-map-tab"
                data-toggle="tab"
                href="#nav-map"
                role="tab"
                aria-controls="nav-map"
                aria-selected="false"
                (click)="initiateMap(); marketLegendHide()"
                >{{ "Sign Out.Map" | translate }}</a
              >
              <a
                class="nav-item nav-link"
                id="nav-list-tab"
                data-toggle="tab"
                href="#nav-list"
                role="tab"
                aria-controls="nav-list"
                aria-selected="false"
                (click)="legendHide()"
                >{{ "Charts.List.label" | translate }}</a
              >
              <a
                class="nav-item nav-link"
                id="nav-notes-tab"
                data-toggle="tab"
                href="#nav-notes"
                role="tab"
                aria-controls="nav-notes"
                aria-selected="false"
                (click)="legendHide()"
                >{{ "Charts.Notes.label" | translate }}</a
              >
              <a
                class="nav-item nav-link"
                id="nav-report-tab"
                data-toggle="tab"
                href="#nav-report"
                role="tab"
                aria-controls="nav-report"
                aria-selected="false"
                (click)="initiateMapReport(); legendHide()"
                >{{ "Charts.Report.label" | translate }}</a
              >
            </div>
          </nav>
          <!-- Current House Modal -->

          <div class="tab-content" id="nav-tabContent">
            <!--Chart chart tab-->
            <div
              class="tab-pane fade show active"
              id="nav-chart"
              role="tabpanel"
              aria-labelledby="nav-chart-tab"
            >
              <div class="generateChart_main_chart">
                <div class="ChartDesign">
                  <div
                    *ngIf="show"
                    class="ChartDesign_chart"
                    style="display: block"
                  >
                    <app-chartjs
                      [plotResp]="plotResp"
                      [redirect]="redirect"
                      [showoutlier]="showoutlier"
                      [datasets]="scatterChartData"
                      [chart]="chart"
                      [togglesActive]="togglesActive"
                      [togglesPending]="togglesPending"
                      (sendMessage)="showDataFromParent($event)"
                    >
                    </app-chartjs>

                    <div class="info ChartInfo">
                      <a href="javascript:void(0)"
                        ><i class="pi pi-info-circle"></i>
                        <div class="overlay">
                          <h6>Chart</h6>
                          <p
                            *ngIf="
                              chart.relatedProperty.listing_type ==
                              'Residential'
                            "
                          >
                            {{ "Charts.Chart.info" | translate }}
                          </p>
                          <p
                            *ngIf="
                              chart.relatedProperty.listing_type == 'Rental'
                            "
                          >
                            {{ "Charts.Chart.infoRent" | translate }}
                          </p>
                        </div>
                      </a>
                    </div>
                  </div>
                  <!-- <div id="chartjs-tooltip" class="top">
                    <table></table>
                  </div> -->
                </div>
                <div class="estimated">
                  <div class="table-responsive">
                    <table class="table">
                      <tbody>
                        <tr>
                          <td>
                            <div class="estimated_mlsDetail" *ngIf="chart">
                              <div
                                class="estimated_mlsDetail_property"
                                [ngStyle]="{
                                  'background-image':
                                    'url(' +
                                    (chart.targetProperty.image ||
                                      '../../assets/images/house-icon-large.png') +
                                    ')'
                                }"
                              >
                                <!-- <img src="{{ chart.targetProperty.image || 'assets/images/house-icon-large.png' }}"> -->
                              </div>
                              <div class="estimated_mlsDetail_profile">
                                <table class="table table-bordered">
                                  <tbody>
                                    <tr>
                                      <td *ngIf="client_id">
                                        {{ selectedClient.firstname }}
                                        {{ selectedClient.lastname }}
                                      </td>
                                      <td *ngIf="!client_id">
                                        {{
                                          chart.client.first
                                            ? chart.client.first
                                            : "-"
                                        }}
                                        {{
                                          chart.client.last
                                            ? chart.client.last
                                            : "-"
                                        }}
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>
                                        {{
                                          chart.targetProperty.address
                                            ? chart.targetProperty.address
                                            : "-"
                                        }}
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>
                                        {{
                                          chart.targetProperty.state
                                            ? chart.targetProperty.state
                                            : "-"
                                        }}
                                        {{
                                          chart.targetProperty.zip
                                            ? chart.targetProperty.zip
                                            : "-"
                                        }}
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>
                                        {{
                                          (chart.relatedProperty.listing_type ==
                                          "Rental"
                                            ? "NewCharts.Rental"
                                            : "NewCharts.Residential"
                                          ) | translate
                                        }}
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>
                                        {{
                                          chart.targetProperty.seasonality
                                            | date: "MMMM d, yyyy"
                                        }}
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>
                          </td>
                          <td>
                            <div class="estimated_value">
                              <div
                                class="estimated_value_title"
                                *ngIf="estimated_home_value"
                              >
                                <h3
                                  [innerHTML]="
                                    'Charts.APC Estimated Market Value'
                                      | translate
                                  "
                                ></h3>
                                <h3>
                                  {{
                                    estimated_home_value.sales_price.lower_bound
                                      | convert: currentcurrency:"1.0-0"
                                  }}
                                  -
                                  {{
                                    estimated_home_value.sales_price.upper_bound
                                      | convert: currentcurrency:"1.0-0"
                                  }}
                                </h3>
                                <div class="info">
                                  <a href="javascript:void(0)"
                                    ><i class="pi pi-info-circle"></i>
                                    <div class="overlay">
                                      <h6
                                        [innerHTML]="
                                          'Charts.APC Estimated Market Value'
                                            | translate
                                        "
                                      ></h6>
                                      <p
                                        [innerHTML]="
                                          'Charts.Analytics.APCEstimatedMarkettext'
                                            | translate
                                              : {
                                                  Sales:
                                                    chart.relatedProperty
                                                      .listing_type == 'Rental'
                                                      ? rental
                                                      : sales,
                                                  Sale:
                                                    chart.relatedProperty
                                                      .listing_type == 'Rental'
                                                      ? Rent
                                                      : Sale,
                                                  sold:
                                                    chart.relatedProperty
                                                      .listing_type == 'Rental'
                                                      ? rented
                                                      : sold
                                                }
                                        "
                                      ></p>
                                    </div>
                                  </a>
                                </div>
                              </div>
                              <div
                                class="estimated_value_rates"
                                *ngIf="chart && accessToken"
                              >
                                <button
                                  type="button"
                                  class="btn btn-primary float-right mb-1"
                                  (click)="starShowHide()"
                                >
                                  {{ "Sign Out." + StarButtonName | translate }}
                                </button>
                                <table class="table table-bordered">
                                  <thead *ngIf="starShow">
                                    <tr>
                                      <th>
                                        {{
                                          "Charts.Chart.Adjustments" | translate
                                        }}
                                      </th>
                                      <th>
                                        {{ "Charts.Chart.Ratings" | translate }}
                                        <div class="info">
                                          <a href="javascript:void(0)"
                                            ><i class="pi pi-info-circle"></i>
                                            <div class="overlay">
                                              <h6>
                                                {{
                                                  "Charts.Chart.Star Ratings"
                                                    | translate
                                                }}
                                              </h6>
                                              <p>
                                                {{
                                                  "Charts.Chart.infostar"
                                                    | translate
                                                }}
                                              </p>
                                            </div>
                                          </a>
                                        </div>
                                      </th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr *ngIf="starShow">
                                      <td>
                                        {{ "Charts.Chart.Site" | translate }}
                                        <div class="info">
                                          <a href="javascript:void(0)"
                                            ><i class="pi pi-info-circle"></i>
                                            <div class="overlay">
                                              <h6>
                                                {{
                                                  "Charts.Chart.Site Rating"
                                                    | translate
                                                }}
                                              </h6>
                                              <p>
                                                {{
                                                  "Charts.Chart.infoSite"
                                                    | translate
                                                }}
                                              </p>
                                            </div>
                                          </a>
                                        </div>
                                      </td>
                                      <td>
                                        <ul>
                                          <li>
                                            <a (click)="starRatingSite(1)"
                                              ><span
                                                [ngClass]="
                                                  rateSite >= 1 ? 'rating' : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingSite(2)"
                                              ><span
                                                [ngClass]="
                                                  rateSite >= 2 ? 'rating' : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingSite(3)"
                                              ><span
                                                [ngClass]="
                                                  rateSite >= 3 ? 'rating' : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingSite(4)"
                                              ><span
                                                [ngClass]="
                                                  rateSite >= 4 ? 'rating' : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingSite(5)"
                                              ><span
                                                [ngClass]="
                                                  rateSite == 5 ? 'rating' : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                        </ul>
                                      </td>
                                    </tr>
                                    <tr *ngIf="starShow">
                                      <td>
                                        {{ "Charts.Chart.Layout" | translate }}
                                        <div class="info">
                                          <a href="javascript:void(0)"
                                            ><i class="pi pi-info-circle"></i>
                                            <div class="overlay">
                                              <h6>
                                                {{
                                                  "Charts.Chart.Layout Rating"
                                                    | translate
                                                }}
                                              </h6>
                                              <p>
                                                {{
                                                  "Charts.Chart.infoLayout"
                                                    | translate
                                                }}
                                              </p>
                                            </div>
                                          </a>
                                        </div>
                                      </td>
                                      <td>
                                        <ul>
                                          <li>
                                            <a (click)="starRatingLayout(1)"
                                              ><span
                                                [ngClass]="
                                                  rateLayout >= 1
                                                    ? 'rating'
                                                    : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingLayout(2)"
                                              ><span
                                                [ngClass]="
                                                  rateLayout >= 2
                                                    ? 'rating'
                                                    : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingLayout(3)"
                                              ><span
                                                [ngClass]="
                                                  rateLayout >= 3
                                                    ? 'rating'
                                                    : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingLayout(4)"
                                              ><span
                                                [ngClass]="
                                                  rateLayout >= 4
                                                    ? 'rating'
                                                    : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingLayout(5)"
                                              ><span
                                                [ngClass]="
                                                  rateLayout == 5
                                                    ? 'rating'
                                                    : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                        </ul>
                                      </td>
                                    </tr>
                                    <tr *ngIf="starShow">
                                      <td>
                                        {{
                                          "Charts.Chart.Condition" | translate
                                        }}
                                        <div class="info">
                                          <a href="javascript:void(0)"
                                            ><i class="pi pi-info-circle"></i>
                                            <div class="overlay">
                                              <h6>
                                                {{
                                                  "Charts.Chart.Condition Rating"
                                                    | translate
                                                }}
                                              </h6>
                                              <p>
                                                {{
                                                  "Charts.Chart.infoCondition"
                                                    | translate
                                                }}
                                              </p>
                                            </div>
                                          </a>
                                        </div>
                                      </td>
                                      <td>
                                        <ul>
                                          <li>
                                            <a (click)="starRatingCondition(1)"
                                              ><span
                                                [ngClass]="
                                                  rateCondition >= 1
                                                    ? 'rating'
                                                    : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingCondition(2)"
                                              ><span
                                                [ngClass]="
                                                  rateCondition >= 2
                                                    ? 'rating'
                                                    : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingCondition(3)"
                                              ><span
                                                [ngClass]="
                                                  rateCondition >= 3
                                                    ? 'rating'
                                                    : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingCondition(4)"
                                              ><span
                                                [ngClass]="
                                                  rateCondition >= 4
                                                    ? 'rating'
                                                    : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingCondition(5)"
                                              ><span
                                                [ngClass]="
                                                  rateCondition == 5
                                                    ? 'rating'
                                                    : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                        </ul>
                                      </td>
                                    </tr>
                                    <tr *ngIf="starShow">
                                      <td>
                                        {{ "Charts.Chart.Quality" | translate }}
                                        <div class="info">
                                          <a href="javascript:void(0)"
                                            ><i class="pi pi-info-circle"></i>
                                            <div class="overlay">
                                              <h6>
                                                {{
                                                  "Charts.Chart.Quality Rating"
                                                    | translate
                                                }}
                                              </h6>
                                              <p>
                                                {{
                                                  "Charts.Chart.infoQuality"
                                                    | translate
                                                }}
                                              </p>
                                            </div>
                                          </a>
                                        </div>
                                      </td>
                                      <td>
                                        <ul>
                                          <li>
                                            <a (click)="starRatingQuantity(1)"
                                              ><span
                                                [ngClass]="
                                                  rateQuantity >= 1
                                                    ? 'rating'
                                                    : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingQuantity(2)"
                                              ><span
                                                [ngClass]="
                                                  rateQuantity >= 2
                                                    ? 'rating'
                                                    : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingQuantity(3)"
                                              ><span
                                                [ngClass]="
                                                  rateQuantity >= 3
                                                    ? 'rating'
                                                    : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingQuantity(4)"
                                              ><span
                                                [ngClass]="
                                                  rateQuantity >= 4
                                                    ? 'rating'
                                                    : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                          <li>
                                            <a (click)="starRatingQuantity(5)"
                                              ><span
                                                [ngClass]="
                                                  rateQuantity == 5
                                                    ? 'rating'
                                                    : ''
                                                "
                                                class="no-rating"
                                              ></span
                                            ></a>
                                          </li>
                                        </ul>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>
                                        {{
                                          "Charts.Chart.Seasonality" | translate
                                        }}
                                        <div class="info">
                                          <a href="javascript:void(0)"
                                            ><i class="pi pi-info-circle"></i>
                                            <div class="overlay">
                                              <h6>
                                                {{
                                                  "Charts.Chart.Seasonality"
                                                    | translate
                                                }}
                                              </h6>
                                              <p>
                                                {{
                                                  "Charts.Chart.infoSeasonality"
                                                    | translate
                                                }}
                                              </p>
                                            </div>
                                          </a>
                                        </div>
                                      </td>
                                      <td>
                                        <p-calendar
                                          [locale]="es"
                                          [minDate]="minimumDate"
                                          [showIcon]="true"
                                          [yearNavigator]="true"
                                          [monthNavigator]="true"
                                          yearRange="2019:2050"
                                          dateFormat="mm/dd/yy"
                                          [(ngModel)]="seasonalityDate"
                                          (onSelect)="changeSeasonality($event)"
                                        >
                                          <ng-template
                                            pTemplate="date"
                                            let-date
                                          >
                                            <span
                                              [ngStyle]="{
                                                backgroundColor:
                                                  date.day < 21 && date.day > 10
                                                    ? 'initial'
                                                    : 'initial'
                                              }"
                                              style="
                                                border-radius: 50%;
                                                padding: 0.25em;
                                                width: 1.75em;
                                                height: 1.75em;
                                                display: block;
                                                color: #000;
                                              "
                                              >{{ date.day }}</span
                                            >
                                          </ng-template>
                                        </p-calendar>
                                      </td>
                                    </tr>
                                    <tr>
                                      <td>
                                        {{
                                          "Charts.Chart.Square Footage"
                                            | translate
                                        }}
                                      </td>
                                      <td>
                                        <input
                                          type="number"
                                          size="30"
                                          class="form-control SQFootage"
                                          #squareFootage
                                          value="{{
                                            chart.targetProperty.squareFootage
                                          }}"
                                        />
                                        <input
                                          type="button"
                                          class="update"
                                          value="{{
                                            'Sign Out.Update' | translate
                                          }}"
                                          (click)="
                                            changeSquareft(squareFootage.value)
                                          "
                                        />
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>
                          </td>
                          <td>
                            <div class="estimated_mlsDetail" *ngIf="chart">
                              <div
                                class="estimated_mlsDetail_property profileimg"
                              >
                                <img
                                  src="{{
                                    chart.agent.photo_250X250 ||
                                      'assets/images/profileDefault.png'
                                  }}"
                                />
                              </div>
                              <!-- <div *ngIf="!chart.agent.photo" class="prof-image-container">
                                <div class="no-image">
                                  No Image Provided
                                </div>
                              </div> -->
                              <div class="estimated_mlsDetail_profile">
                                <table class="table table-bordered">
                                  <tbody>
                                    <tr>
                                      <td>{{ chart.agent.fullName }}</td>
                                    </tr>
                                    <tr>
                                      <td>{{ chart.agent.company }}</td>
                                    </tr>
                                    <tr>
                                      <td>{{ chart.agent.email }}</td>
                                    </tr>
                                    <tr *ngIf="chart.agent.phone">
                                      <td>{{ chart.agent.phone }}</td>
                                    </tr>
                                    <tr *ngIf="chart.agent.website">
                                      <td>{{ chart.agent.website }}</td>
                                    </tr>
                                  </tbody>
                                </table>
                              </div>
                            </div>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <!--Chart analytics tab-->
            <div
              class="tab-pane fade"
              id="nav-analytic"
              role="tabpanel"
              aria-labelledby="nav-analytic-tab"
            >
              <div class="generateChart_main_analytics">
                <div class="table-responsive">
                  <table class="table table-bordered" *ngIf="chart">
                    <thead>
                      <tr *ngIf="!samlFlag" class="trbgcolor">
                        <!-- <th colspan="7">{{ chart.targetProperty.address }} {{ chart.targetProperty.city }},
                          {{ chart.targetProperty.state }}(Search Criteria)</th> -->
                        <th colspan="7">
                          <h6>
                            {{ "Charts.Analytics.Search Criteria" | translate }}
                          </h6>
                        </th>
                      </tr>
                      <tr *ngIf="!samlFlag">
                        <th *ngIf="!rentalChartDisplay">
                          {{ "Charts.Analytics.Property Type" | translate }}
                        </th>
                        <th>
                          {{ "Charts.Analytics.Subdivisions" | translate }}(s)
                        </th>
                        <th>{{ "Charts.Analytics.Year Built" | translate }}</th>
                        <th>
                          {{ "Charts.Analytics.Price Range" | translate }}
                        </th>
                        <th>{{ "Charts.Analytics.SqFt" | translate }}</th>
                        <th *ngIf="rentalChartDisplay">
                          {{ "Charts.Analytics.Furnished" | translate }}
                        </th>
                        <th>{{ "Charts.Analytics.Zip(s)" | translate }}</th>
                        <th>{{ "Charts.Analytics.Date Range" | translate }}</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr *ngIf="chart && !samlFlag">
                        <td *ngIf="!rentalChartDisplay">
                          {{
                            chart.relatedProperty.propertySubType
                              ? chart.relatedProperty.propertySubType
                              : "All"
                          }}
                        </td>
                        <td
                          *ngIf="
                            chart.relatedProperty.subDivisionArray.length > 0
                          "
                        >
                          {{
                            chart.relatedProperty.subDivisionArray.join(", ")
                          }}
                        </td>
                        <td
                          *ngIf="
                            chart.relatedProperty.subDivisionArray.length == 0
                          "
                        >
                          {{ "Charts.Analytics.None" | translate }}
                        </td>
                        <td>
                          {{ chart.relatedProperty.minYear }} -
                          {{ chart.relatedProperty.maxYear }}
                        </td>
                        <td>
                          {{
                            chart.relatedProperty.minPrice
                              | convert: currentcurrency:"1.0-0"
                          }}
                          -
                          <span *ngIf="chart.relatedProperty.maxPrice != ''">{{
                            chart.relatedProperty.maxPrice
                              | convert: currentcurrency:"1.0-0"
                          }}</span>
                        </td>
                        <td>
                          {{ chart.relatedProperty.minArea | number: "1.0-0" }}
                          -
                          {{ chart.relatedProperty.maxArea | number: "1.0-0" }}
                        </td>
                        <td *ngIf="rentalChartDisplay">
                          {{
                            chart.relatedProperty.furnished
                              ? chart.relatedProperty.furnished
                              : "N/A"
                          }}
                        </td>
                        <td
                          *ngIf="chart.relatedProperty.zipCodeArray.length > 0"
                        >
                          {{ chart.relatedProperty.zipCodeArray.join(", ") }}
                        </td>
                        <td
                          *ngIf="chart.relatedProperty.zipCodeArray.length == 0"
                        >
                          {{ "Charts.Analytics.None" | translate }}
                        </td>
                        <td>
                          {{
                            "NewCharts." +
                              (chart.relatedProperty.minClose | date: "MMMM")
                              | translate
                          }}{{
                            chart.relatedProperty.minClose | date: " d, yyyy"
                          }}
                          -
                          {{
                            "NewCharts." + (chart.updated | date: "MMMM")
                              | translate
                          }}{{ chart.updated | date: " d, yyyy" }}
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="table-analytic">
                  <table
                    class="table table-bordered"
                    *ngIf="estimated_home_value"
                  >
                    <thead>
                      <tr class="trbgcolor">
                        <th colspan="2">
                          <h6>
                            {{
                              "Charts.Analytics.Subject Property Analytics"
                                | translate
                            }}
                          </h6>
                        </th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <td>
                          {{
                            "Charts.Analytics.Seasonality Adjustment"
                              | translate
                          }}
                          <div class="info">
                            <a href="javascript:void(0)"
                              ><i class="pi pi-info-circle"></i>
                              <div class="overlay">
                                <h6>
                                  {{
                                    "Charts.Analytics.Seasonality Adjustment"
                                      | translate
                                  }}
                                </h6>
                                <p
                                  *ngIf="
                                    chart.relatedProperty.listing_type ==
                                    'Residential'
                                  "
                                >
                                  {{
                                    "Charts.Analytics.Seasonalitytext"
                                      | translate
                                  }}
                                </p>
                                <p
                                  *ngIf="
                                    chart.relatedProperty.listing_type ==
                                    'Rental'
                                  "
                                >
                                  {{
                                    "Charts.Analytics.SeasonalityRenttext"
                                      | translate
                                  }}
                                </p>
                              </div>
                            </a>
                          </div>
                        </td>
                        <td>
                          {{
                            estimated_home_value.seasonlity_value
                              | minus
                              | convert: currentcurrency:"1.0-0"
                          }}
                          <i
                            class="pi pi-arrow-down"
                            *ngIf="estimated_home_value.seasonlity_value < 0"
                          ></i>
                          <i
                            class="pi pi-arrow-up"
                            *ngIf="estimated_home_value.seasonlity_value >= 0"
                          ></i>
                        </td>
                      </tr>
                      <tr>
                        <td *ngIf="!samlFlag">
                          {{
                            "Charts.Analytics.Market Conditions Adjustment"
                              | translate
                          }}
                          <div class="info">
                            <a href="javascript:void(0)"
                              ><i class="pi pi-info-circle"></i>
                              <div class="overlay">
                                <h6>
                                  {{
                                    "Charts.Analytics.Market Conditions Adjustment"
                                      | translate
                                  }}
                                </h6>
                                <p>
                                  {{
                                    "Charts.Analytics.MarketAdjustmenttext"
                                      | translate
                                  }}
                                </p>
                              </div>
                            </a>
                          </div>
                        </td>
                        <td *ngIf="!samlFlag">
                          {{
                            estimated_home_value.market_condition_value
                              | minus
                              | convert: currentcurrency:"1.0-0"
                          }}
                          <i
                            class="pi pi-arrow-down"
                            *ngIf="
                              estimated_home_value.market_condition_value < 0
                            "
                          ></i>
                          <i
                            class="pi pi-arrow-up"
                            *ngIf="
                              estimated_home_value.market_condition_value >= 0
                            "
                          ></i>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          {{
                            "Charts.Analytics.Property Adjustment" | translate
                          }}
                          <div class="info">
                            <a href="javascript:void(0)"
                              ><i class="pi pi-info-circle"></i>
                              <div class="overlay">
                                <h6>
                                  {{
                                    "Charts.Analytics.Property Adjustment"
                                      | translate
                                  }}
                                </h6>
                                <p>
                                  {{
                                    "Charts.Analytics.PropertyAdjustmenttext"
                                      | translate
                                  }}
                                </p>
                              </div>
                            </a>
                          </div>
                        </td>
                        <td>
                          {{
                            estimated_home_value.property_adjustment_value
                              | minus
                              | convert: currentcurrency:"1.0-0"
                          }}
                          <i
                            class="pi pi-arrow-down"
                            *ngIf="
                              estimated_home_value.property_adjustment_value < 0
                            "
                          ></i>
                          <i
                            class="pi pi-arrow-up"
                            *ngIf="
                              estimated_home_value.property_adjustment_value >=
                              0
                            "
                          ></i>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <span
                            [innerHTML]="
                              'Charts.Analytics.APC Estimated Market Value'
                                | translate
                            "
                          ></span>
                          <div class="info">
                            <a href="javascript:void(0)"
                              ><i class="pi pi-info-circle"></i>
                              <div class="overlay">
                                <h6
                                  [innerHTML]="
                                    'Charts.Analytics.APC Estimated Market Value'
                                      | translate
                                  "
                                ></h6>
                                <p
                                  [innerHTML]="
                                    'Charts.Analytics.APCEstimatedMarkettext'
                                      | translate
                                        : {
                                            Sales:
                                              chart.relatedProperty
                                                .listing_type == 'Rental'
                                                ? rental
                                                : sales,
                                            Sale:
                                              chart.relatedProperty
                                                .listing_type == 'Rental'
                                                ? Rent
                                                : Sale,
                                            sold:
                                              chart.relatedProperty
                                                .listing_type == 'Rental'
                                                ? rented
                                                : sold
                                          }
                                  "
                                ></p>
                              </div>
                            </a>
                          </div>
                        </td>
                        <td>
                          {{
                            estimated_home_value.sales_price.lower_bound
                              | convert: currentcurrency:"1.0-0"
                          }}
                          -
                          {{
                            estimated_home_value.sales_price.upper_bound
                              | convert: currentcurrency:"1.0-0"
                          }}
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <span
                            [innerHTML]="
                              'Charts.Analytics.APC Suggested List Price'
                                | translate
                            "
                          ></span>
                          <div class="info">
                            <a href="javascript:void(0)"
                              ><i class="pi pi-info-circle"></i>
                              <div class="overlay">
                                <h6
                                  [innerHTML]="
                                    'Charts.Analytics.APC Suggested List Price'
                                      | translate
                                  "
                                ></h6>
                                <p
                                  [innerHTML]="
                                    'Charts.Analytics.APCSuggestedListPricetext'
                                      | translate
                                        : {
                                            Sales:
                                              chart.relatedProperty
                                                .listing_type == 'Rental'
                                                ? rental
                                                : sales
                                          }
                                  "
                                ></p>
                              </div>
                            </a>
                          </div>
                        </td>
                        <td>
                          {{
                            estimated_home_value.list_price.lower_bound
                              | convert: currentcurrency:"1.0-0"
                          }}
                          -
                          {{
                            estimated_home_value.list_price.upper_bound
                              | convert: currentcurrency:"1.0-0"
                          }}
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <span
                            [innerHTML]="
                              'Charts.Analytics.APC Days on Market' | translate
                            "
                          ></span>
                          <div class="info">
                            <a href="javascript:void(0)"
                              ><i class="pi pi-info-circle"></i>
                              <div class="overlay">
                                <h6
                                  [innerHTML]="
                                    'Charts.Analytics.APC Days on Market'
                                      | translate
                                  "
                                ></h6>
                                <p
                                  *ngIf="
                                    chart.relatedProperty.listing_type ==
                                    'Residential'
                                  "
                                  [innerHTML]="
                                    'Charts.Analytics.APCDaysonMarkettext'
                                      | translate
                                  "
                                ></p>
                                <p
                                  *ngIf="
                                    chart.relatedProperty.listing_type ==
                                    'Rental'
                                  "
                                >
                                  {{
                                    "Charts.Analytics.APCDaysonMarketRenttext"
                                      | translate
                                  }}
                                </p>
                              </div>
                            </a>
                          </div>
                        </td>
                        <td>
                          {{
                            estimated_home_value.subject_property_days_on_market
                              | number: "1.0-0"
                          }}
                        </td>
                      </tr>

                      <tr>
                        <td>
                          <span
                            [innerHTML]="
                              'Charts.Analytics.Sales to List Price'
                                | translate
                                  : {
                                      Sales:
                                        chart.relatedProperty.listing_type ==
                                        'Rental'
                                          ? rental
                                          : sales
                                    }
                            "
                          ></span>
                          <div class="info">
                            <a href="javascript:void(0)"
                              ><i class="pi pi-info-circle"></i>
                              <div class="overlay">
                                <h6
                                  [innerHTML]="
                                    'Charts.Analytics.Sales to List Price'
                                      | translate
                                        : {
                                            Sales:
                                              chart.relatedProperty
                                                .listing_type == 'Rental'
                                                ? rental
                                                : sales
                                          }
                                  "
                                ></h6>
                                <p
                                  [innerHTML]="
                                    'Charts.Analytics.SalestoListPricetext'
                                      | translate
                                        : {
                                            Sales:
                                              chart.relatedProperty
                                                .listing_type == 'Rental'
                                                ? rental
                                                : sales,
                                            sales:
                                              chart.relatedProperty
                                                .listing_type == 'Rental'
                                                ? rental2
                                                : sales2,
                                            closed:
                                              chart.relatedProperty
                                                .listing_type == 'Rental'
                                                ? rented
                                                : closed
                                          }
                                  "
                                ></p>
                              </div>
                            </a>
                          </div>
                        </td>
                        <td>
                          {{
                            estimated_home_value.sale_price_to_list_price
                              | number: "1.0-2"
                          }}%
                        </td>
                      </tr>
                      <tr>
                        <td>
                          <span
                            [innerHTML]="
                              'Charts.Analytics.APC Estimated Sales Price per SqFt'
                                | translate
                                  : {
                                      Sales:
                                        chart.relatedProperty.listing_type ==
                                        'Rental'
                                          ? rental
                                          : sales
                                    }
                            "
                          ></span>
                          <div class="info">
                            <a href="javascript:void(0)"
                              ><i class="pi pi-info-circle"></i>
                              <div class="overlay">
                                <h6
                                  [innerHTML]="
                                    'Charts.Analytics.APC Estimated Sales Price per SqFt'
                                      | translate
                                        : {
                                            Sales:
                                              chart.relatedProperty
                                                .listing_type == 'Rental'
                                                ? rental
                                                : sales
                                          }
                                  "
                                ></h6>
                                <p
                                  [innerHTML]="
                                    'Charts.Analytics.APC Estimated Sales Price per SqFttext'
                                      | translate
                                        : {
                                            Sales:
                                              chart.relatedProperty
                                                .listing_type == 'Rental'
                                                ? rental
                                                : sales,
                                            sold:
                                              chart.relatedProperty
                                                .listing_type == 'Rental'
                                                ? rented
                                                : sold
                                          }
                                  "
                                ></p>
                              </div>
                            </a>
                          </div>
                        </td>
                        <td>
                          {{
                            estimated_home_value.sales_price.estimate /
                              estimated_home_value.area
                              | convert: currentcurrency:"1.0-2"
                          }}
                        </td>
                      </tr>
                    </tbody>
                  </table>
                </div>
                <div class="table-sale" *ngIf="plotResp">
                  <div class="table-responsive">
                    <table
                      class="table table-bordered"
                      (mouseout)="hoverIndex = 2"
                    >
                      <tbody>
                        <tr>
                          <td>
                            <table class="table">
                              <thead>
                                <tr class="trbgcolor">
                                  <th>
                                    <h6
                                      *ngIf="!rentalChartDisplay"
                                      [innerHTML]="
                                        'Charts.Analytics.APC Probability of Sale (POS)'
                                          | translate
                                      "
                                    ></h6>
                                    <h6
                                      *ngIf="rentalChartDisplay"
                                      [innerHTML]="
                                        'Charts.Analytics.APC Probability of Rent (POR)'
                                          | translate
                                      "
                                    ></h6>
                                  </th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <td>
                                    <div class="table-sale_chart">
                                      <canvas
                                        baseChart
                                        width="300"
                                        height="300"
                                        [datasets]="lineChartData"
                                        [labels]="lineChartLabels"
                                        [options]="lineChartOptions"
                                        [colors]="lineChartColors"
                                        [legend]="lineChartLegend"
                                        [chartType]="lineChartType"
                                        [plugins]="lineChartPlugins"
                                      >
                                      </canvas>
                                    </div>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                          <td>
                            <table class="table">
                              <thead>
                                <tr class="trbgcolor">
                                  <th>
                                    <h6 *ngIf="!rentalChartDisplay">
                                      {{ "Charts.Analytics.POS" | translate }}
                                    </h6>
                                    <h6 *ngIf="rentalChartDisplay">
                                      {{ "Charts.Analytics.POR" | translate }}
                                    </h6>
                                  </th>
                                  <th>
                                    <h6>
                                      {{
                                        "Charts.Analytics.List Price"
                                          | translate
                                      }}
                                    </h6>
                                  </th>
                                  <th>
                                    <h6>
                                      {{ "Charts.Analytics.DOM" | translate }}
                                    </h6>
                                  </th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr
                                  *ngFor="
                                    let row of plotResp.estimated_home_value
                                      .probability_of_sale_table;
                                    index as i
                                  "
                                  [ngClass]="{ rowColor: i == hoverIndex }"
                                >
                                  <td>
                                    <h6>{{ row.probability_of_sale }}%</h6>
                                  </td>
                                  <td>
                                    <h6>
                                      {{
                                        row.list_price
                                          | convert: currentcurrency:"1.0-0"
                                      }}
                                    </h6>
                                  </td>
                                  <td>
                                    <h6>
                                      {{ row.days_on_market | number: "1.0-0" }}
                                    </h6>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                          <td>
                            <table class="table">
                              <thead>
                                <tr class="trbgcolor">
                                  <th colspan="2">
                                    <h6
                                      [innerHTML]="
                                        'Charts.Analytics.APC Days on Market (DOM)'
                                          | translate
                                      "
                                    ></h6>
                                  </th>
                                </tr>
                              </thead>
                              <tbody>
                                <tr>
                                  <td>
                                    <div class="table-sale_chart">
                                      <canvas
                                        baseChart
                                        width="300"
                                        height="300"
                                        [datasets]="lineChartData2"
                                        [labels]="lineChartLabels"
                                        [options]="lineChartOptions2"
                                        [colors]="lineChartColors"
                                        [legend]="lineChartLegend"
                                        [chartType]="lineChartType"
                                        [plugins]="lineChartPlugins"
                                      >
                                      </canvas>
                                    </div>
                                  </td>
                                </tr>
                              </tbody>
                            </table>
                          </td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
                <div class="table-report">
                  <table class="table" *ngIf="chart">
                    <thead>
                      <tr class="trbgcolor">
                        <th>
                          <h6>
                            <span
                              [innerHTML]="
                                'Charts.Analytics.APC Report Produced by'
                                  | translate
                              "
                            ></span>
                            {{ chart.agent.fullName }}
                            {{ "Charts.Analytics.with" | translate }}
                            {{ chart.agent.company }}
                            {{ "Charts.Analytics.on" | translate }}
                            {{ chart.created | date: "MM/dd/yyyy" }}
                          </h6>
                        </th>
                      </tr>
                    </thead>
                  </table>
                </div>
              </div>
            </div>
            <!--Chart map tab-->
            <div
              class="tab-pane fade"
              id="nav-map"
              role="tabpanel"
              aria-labelledby="nav-map-tab"
            >
              <agm-map
                [streetViewControl]="false"
                [scrollwheel]="true"
                [zoomControl]="true"
                [mapTypeControl]="false"
                [fullscreenControl]="false"
                [scaleControl]="false"
                (mapReady)="onMapReady($event)"
                (mapClick)="mapClicked($event)"
                (zoomChange)="zoomChange($event)"
              >
              </agm-map>
            </div>
            <!--Chart list tab-->
            <div
              class="tab-pane fade"
              id="nav-list"
              role="tabpanel"
              aria-labelledby="nav-list-tab"
            >
              <div class="generateChart_main_tablist">
                <nav>
                  <div class="nav nav-tabs" id="nav-tab-list" role="tablist">
                    <a
                      [ngClass]="
                        showActiveTable
                          ? 'nav-item nav-link active'
                          : 'nav-item nav-link'
                      "
                      id="nav-active-tab"
                      data-toggle="tab"
                      href="#active-list"
                      role="tab"
                      aria-controls="active-list"
                      aria-selected="true"
                      >{{ "Charts.List.Active" | translate }}</a
                    >
                    <a
                      [ngClass]="
                        showPendingTable && !showActiveTable
                          ? 'nav-item nav-link active'
                          : 'nav-item nav-link'
                      "
                      id="nav-pending-tab"
                      data-toggle="tab"
                      href="#pending-list"
                      role="tab"
                      aria-controls="pending-list"
                      aria-selected="false"
                      >{{ "Charts.List.Pending" | translate }}</a
                    >
                    <a
                      [ngClass]="
                        !showPendingTable && !showActiveTable
                          ? 'nav-item nav-link active'
                          : 'nav-item nav-link'
                      "
                      id="nav-closed-tab"
                      data-toggle="tab"
                      href="#closed-list"
                      role="tab"
                      aria-controls="closed-list"
                      aria-selected="false"
                      >{{
                        (chart?.relatedProperty.listing_type == "Rental"
                          ? "NewCharts.Rented"
                          : "NewCharts.Closed"
                        ) | translate
                      }}</a
                    >
                  </div>
                </nav>
                <div class="tab-content" id="nav-tabContent-list" *ngIf="chart">
                  <!--list active tab-->
                  <div
                    [ngClass]="
                      showActiveTable
                        ? 'tab-pane fade show active'
                        : 'tab-pane fade'
                    "
                    *ngIf="showActiveTable"
                    id="active-list"
                    role="tabpanel"
                    aria-labelledby="nav-active-tab"
                  >
                    <div class="table-responsive">
                      <table class="table table-bordered">
                        <thead class="thead-light">
                          <tr>
                            <th>{{ "Charts.List.Photos" | translate }}</th>
                            <th>{{ "Charts.List.MLS" | translate }}</th>
                            <th>{{ "Charts.List.Address" | translate }}</th>
                            <th (click)="sortByfilterFunction('yearBuilt')">
                              {{ "Charts.List.Year Built" | translate }}
                              <a *ngIf="sortByfilter != 'yearBuilt'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'yearBuilt' && sortreverse
                                "
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'yearBuilt' && !sortreverse
                                "
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('squareFootage')">
                              {{ "Charts.List.SqFt" | translate }}
                              <a *ngIf="sortByfilter != 'squareFootage'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'squareFootage' && sortreverse
                                "
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'squareFootage' &&
                                  !sortreverse
                                "
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('bed')">
                              {{ "Charts.List.Bed" | translate }}
                              <a *ngIf="sortByfilter != 'bed'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'bed' && sortreverse"
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'bed' && !sortreverse"
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('bath')">
                              {{ "Charts.List.Bath" | translate }}
                              <a *ngIf="sortByfilter != 'bath'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'bath' && sortreverse"
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'bath' && !sortreverse"
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('days')">
                              {{ "Charts.List.DOM" | translate }}
                              <a *ngIf="sortByfilter != 'days'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'days' && sortreverse"
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'days' && !sortreverse"
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <!-- <th (click)="sortByfilterFunction('daysPx')">{{ 'Charts.List.LPxDOM' | translate }}
                              <div class="info">
                                <a href="javascript:void(0)"><i class="pi pi-info-circle"></i>
                                  <div class="overlay">
                                    <h6>{{ 'Charts.List.LPxDOM' | translate }}</h6>
                                    <p>{{ 'Charts.List.LPxDOMtext' | translate }}</p>
                                  </div>
                                </a>

                              </div>
                              <a *ngIf="sortByfilter != 'daysPx'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'daysPx' && sortreverse"><i class="pi pi-caret-up"></i> </a>
                              <a *ngIf="sortByfilter == 'daysPx' && !sortreverse"><i class="pi pi-caret-down"></i> </a>
                            </th> -->
                            <th (click)="sortByfilterFunction('listPrice')">
                              {{ "Charts.List.List Price" | translate }}
                              <a *ngIf="sortByfilter != 'listPrice'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'listPrice' && sortreverse
                                "
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'listPrice' && !sortreverse
                                "
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('priceSqFt')">
                              {{ "Charts.List.$/SqFt" | translate }}
                              <a *ngIf="sortByfilter != 'priceSqFt'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'priceSqFt' && sortreverse
                                "
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'priceSqFt' && !sortreverse
                                "
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th class="removePrint" *ngIf="accessToken"></th>
                            <!-- <th class="removePrint" *ngIf="accessToken">{{ 'Charts.List.Delete' | translate }}</th> -->
                          </tr>
                        </thead>
                        <tbody>
                          <tr
                            *ngFor="
                              let house of chart.activeHomes
                                | sortBy: sortByfilter:sortreverse;
                              let i = index
                            "
                          >
                            <td class="related-image">
                              <div
                                class="photo"
                                (click)="
                                  showImages(house.mlsNumber, house.status)
                                "
                              >
                                <img
                                  src="{{
                                    house.photos[0] ? house.photos[0] : ''
                                  }}"
                                />
                                <div class="photooverlay">
                                  {{
                                    "Charts.List.Click for More Photos"
                                      | translate
                                  }}
                                </div>
                              </div>
                            </td>
                            <td>{{ house.mlsNumber }}</td>
                            <td>{{ house.address }}</td>
                            <td>{{ house.yearBuilt | number }}</td>
                            <td>{{ house.squareFootage | number }}</td>
                            <td>{{ house.bed | number }}</td>
                            <td>{{ house.bath | number }}</td>
                            <td>{{ house.days | number }}</td>
                            <!-- <td>{{ house.daysPx }}</td> -->
                            <td>
                              {{
                                house.listPrice
                                  | convert: currentcurrency:"1.0-0"
                              }}
                            </td>
                            <td>
                              {{
                                house.priceSqFt
                                  | convert: currentcurrency:"1.2-2"
                              }}
                            </td>
                            <td class="removePrint" *ngIf="accessToken">
                              <button
                                type="button"
                                (click)="
                                  deleteFromChart(house.mlsNumber, house.status)
                                "
                              >
                                <i class="material-icons">delete_forever</i>
                              </button>
                            </td>
                          </tr>
                          <tr *ngIf="chart.activeHomes.length == 0">
                            <td colspan="12" style="text-align: center">
                              {{ "Charts.List.No Data Found" | translate }}.
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <!--list pending tab-->
                  <div
                    [ngClass]="
                      showPendingTable && !showActiveTable
                        ? 'tab-pane fade show active'
                        : 'tab-pane fade'
                    "
                    *ngIf="showPendingTable"
                    id="pending-list"
                    role="tabpanel"
                    aria-labelledby="nav-pending-tab"
                  >
                    <div class="table-responsive">
                      <table class="table table-bordered">
                        <thead class="thead-light">
                          <tr>
                            <th>{{ "Charts.List.Photos" | translate }}</th>
                            <th>{{ "Charts.List.MLS" | translate }}</th>
                            <th>{{ "Charts.List.Address" | translate }}</th>
                            <th (click)="sortByfilterFunction('yearBuilt')">
                              {{ "Charts.List.Year Built" | translate }}
                              <a *ngIf="sortByfilter != 'yearBuilt'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'yearBuilt' && sortreverse
                                "
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'yearBuilt' && !sortreverse
                                "
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('squareFootage')">
                              {{ "Charts.List.SqFt" | translate }}
                              <a *ngIf="sortByfilter != 'squareFootage'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'squareFootage' && sortreverse
                                "
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'squareFootage' &&
                                  !sortreverse
                                "
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('bed')">
                              {{ "Charts.List.Bed" | translate }}
                              <a *ngIf="sortByfilter != 'bed'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'bed' && sortreverse"
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'bed' && !sortreverse"
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('bath')">
                              {{ "Charts.List.Bath" | translate }}
                              <a *ngIf="sortByfilter != 'bath'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'bath' && sortreverse"
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'bath' && !sortreverse"
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('days')">
                              {{ "Charts.List.DOM" | translate }}
                              <a *ngIf="sortByfilter != 'days'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'days' && sortreverse"
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'days' && !sortreverse"
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <!-- <th (click)="sortByfilterFunction('daysPx')">
                              {{ 'Charts.List.LPxDOM' | translate }}
                              <div class="info">
                                <a href="javascript:void(0)"><i class="pi pi-info-circle"></i>
                                  <div class="overlay">
                                    <h6>{{ 'Charts.List.LPxDOM' | translate }}</h6>
                                    <p>{{ 'Charts.List.LPxDOMtext' | translate }}</p>
                                  </div>
                                </a>
                              </div>
                              <a *ngIf="sortByfilter != 'daysPx'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'daysPx' && sortreverse"><i class="pi pi-caret-up"></i> </a>
                              <a *ngIf="sortByfilter == 'daysPx' && !sortreverse"><i class="pi pi-caret-down"></i> </a>
                            </th> -->
                            <th (click)="sortByfilterFunction('listPrice')">
                              {{ "Charts.List.List Price" | translate }}
                              <a *ngIf="sortByfilter != 'listPrice'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'listPrice' && sortreverse
                                "
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'listPrice' && !sortreverse
                                "
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('priceSqFt')">
                              {{ "Charts.List.$/SqFt" | translate }}
                              <a *ngIf="sortByfilter != 'priceSqFt'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'priceSqFt' && sortreverse
                                "
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'priceSqFt' && !sortreverse
                                "
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th class="removePrint" *ngIf="accessToken"></th>
                            <!-- <th class="removePrint" *ngIf="accessToken">{{ 'Charts.List.Delete' | translate }}</th> -->
                          </tr>
                        </thead>
                        <tbody>
                          <tr
                            *ngFor="
                              let house of chart.pendingHomes
                                | sortBy: sortByfilter:sortreverse;
                              let i = index
                            "
                          >
                            <td class="related-image">
                              <div
                                class="photo"
                                (click)="
                                  showImages(house.mlsNumber, house.status)
                                "
                              >
                                <img
                                  src="{{
                                    house.photos[0] ? house.photos[0] : ''
                                  }}"
                                />
                                <div class="photooverlay">
                                  {{
                                    "Charts.List.Click for More Photos"
                                      | translate
                                  }}
                                </div>
                              </div>
                            </td>
                            <td>{{ house.mlsNumber }}</td>
                            <td>{{ house.address }}</td>
                            <td>{{ house.yearBuilt | number }}</td>
                            <td>{{ house.squareFootage | number }}</td>
                            <td>{{ house.bed | number }}</td>
                            <td>{{ house.bath | number }}</td>
                            <td>{{ house.days | number }}</td>
                            <!-- <td>{{ house.daysPx }}</td> -->
                            <td>
                              {{
                                house.listPrice
                                  | convert: currentcurrency:"1.0-0"
                              }}
                            </td>
                            <td>
                              {{
                                house.priceSqFt
                                  | convert: currentcurrency:"1.2-2"
                              }}
                            </td>
                            <td class="removePrint" *ngIf="accessToken">
                              <button
                                type="button"
                                (click)="
                                  deleteFromChart(house.mlsNumber, house.status)
                                "
                              >
                                <i class="material-icons">delete_forever</i>
                              </button>
                            </td>
                          </tr>
                          <tr *ngIf="chart.pendingHomes.length == 0">
                            <td colspan="12" style="text-align: center">
                              {{ "Charts.List.No Data Found" | translate }}.
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <!--list Closed tab-->
                  <div
                    [ngClass]="
                      !showPendingTable && !showActiveTable
                        ? 'tab-pane fade show active'
                        : 'tab-pane fade'
                    "
                    id="closed-list"
                    role="tabpanel"
                    aria-labelledby="nav-closed-tab"
                  >
                    <div class="table-responsive">
                      <table rowspan="7" class="table table-bordered">
                        <thead class="thead-light">
                          <tr>
                            <th>{{ "Charts.List.Photos" | translate }}</th>
                            <th>{{ "Charts.List.MLS" | translate }}</th>
                            <th>{{ "Charts.List.Address" | translate }}</th>
                            <th (click)="sortByfilterFunction('yearBuilt')">
                              {{ "Charts.List.Year Built" | translate }}
                              <a *ngIf="sortByfilter != 'yearBuilt'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'yearBuilt' && sortreverse
                                "
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'yearBuilt' && !sortreverse
                                "
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('squareFootage')">
                              {{ "Charts.List.SqFt" | translate }}
                              <a *ngIf="sortByfilter != 'squareFootage'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'squareFootage' && sortreverse
                                "
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'squareFootage' &&
                                  !sortreverse
                                "
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('bed')">
                              {{ "Charts.List.Bed" | translate }}
                              <a *ngIf="sortByfilter != 'bed'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'bed' && sortreverse"
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'bed' && !sortreverse"
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('bath')">
                              {{ "Charts.List.Bath" | translate }}
                              <a *ngIf="sortByfilter != 'Bath'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'Bath' && sortreverse"
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'Bath' && !sortreverse"
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('days')">
                              {{ "Charts.List.DOM" | translate }}
                              <a *ngIf="sortByfilter != 'days'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'days' && sortreverse"
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'days' && !sortreverse"
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <!-- <th (click)="sortByfilterFunction('daysPx')">
                              {{ 'Charts.List.LPxDOM' | translate }}
                              <div class="info">
                                <a href="javascript:void(0)"><i class="pi pi-info-circle"></i>
                                  <div class="overlay">
                                    <h6>{{ 'Charts.List.LPxDOM' | translate }}</h6>
                                    <p>{{ 'Charts.List.LPxDOMtext' | translate }}</p>
                                  </div>
                                </a>
                              </div>
                              <a *ngIf="sortByfilter != 'daysPx'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a *ngIf="sortByfilter == 'daysPx' && sortreverse"><i class="pi pi-caret-up"></i> </a>
                              <a *ngIf="sortByfilter == 'daysPx' && !sortreverse"><i class="pi pi-caret-down"></i> </a>
                            </th> -->
                            <th (click)="sortByfilterFunction('listPrice')">
                              {{ "Charts.List.List Price" | translate }}
                              <a *ngIf="sortByfilter != 'listPrice'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'listPrice' && sortreverse
                                "
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'listPrice' && !sortreverse
                                "
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('closePrice')">
                              <span *ngIf="!rentalChartDisplay"
                                >{{ "Charts.List.SOLD A" | translate }}
                                {{ "Charts.List.PRICE S" | translate }}</span
                              >
                              <span *ngIf="rentalChartDisplay"
                                >{{ "Charts.List.RENTAL A" | translate }}
                                {{ "Charts.List.PRICE R" | translate }}</span
                              >
                              <a *ngIf="sortByfilter != 'closePrice'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'closePrice' && sortreverse
                                "
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'closePrice' && !sortreverse
                                "
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('salesToList')">
                              <span *ngIf="!rentalChartDisplay">{{
                                "Charts.List.SP%LP" | translate
                              }}</span>
                              <span *ngIf="rentalChartDisplay">{{
                                "Charts.List.RP%LP" | translate
                              }}</span>
                              <a *ngIf="sortByfilter != 'salesToList'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'salesToList' && sortreverse
                                "
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'salesToList' && !sortreverse
                                "
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('priceSqFt')">
                              {{ "Charts.List.$/SqFt" | translate }}
                              <a *ngIf="sortByfilter != 'priceSqFt'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'priceSqFt' && sortreverse
                                "
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'priceSqFt' && !sortreverse
                                "
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th (click)="sortByfilterFunction('saleDate')">
                              <span *ngIf="!rentalChartDisplay"
                                >{{ "Charts.List.SOLD B" | translate }}
                                {{ "Charts.List.DATE S" | translate }}</span
                              >
                              <span *ngIf="rentalChartDisplay"
                                >{{ "Charts.List.RENTAL B" | translate }}
                                {{ "Charts.List.DATE R" | translate }}</span
                              >
                              <a *ngIf="sortByfilter != 'saleDate'">
                                <i class="pi pi-caret-up"></i>
                                <i class="pi pi-caret-down"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'saleDate' && sortreverse
                                "
                                ><i class="pi pi-caret-up"></i>
                              </a>
                              <a
                                *ngIf="
                                  sortByfilter == 'saleDate' && !sortreverse
                                "
                                ><i class="pi pi-caret-down"></i>
                              </a>
                            </th>
                            <th class="removePrint" *ngIf="accessToken"></th>
                            <!-- <th class="removePrint" *ngIf="accessToken">{{ 'Charts.List.Delete' | translate }}</th> -->
                          </tr>
                        </thead>
                        <tbody>
                          <tr
                            *ngFor="
                              let house of chart.closedHomes
                                | sortBy: sortByfilter:sortreverse;
                              let i = index
                            "
                          >
                            <td class="related-image">
                              <div
                                class="photo"
                                (click)="
                                  showImages(house.mlsNumber, house.status)
                                "
                              >
                                <img
                                  src="{{
                                    house.photos[0] ? house.photos[0] : ''
                                  }}"
                                />
                                <div class="photooverlay">
                                  {{
                                    "Charts.List.Click for More Photos"
                                      | translate
                                  }}
                                </div>
                              </div>
                            </td>
                            <td>{{ house.mlsNumber }}</td>
                            <td>{{ house.address }}</td>
                            <td>{{ house.yearBuilt | number }}</td>
                            <td>
                              {{
                                house.squareFootage != "-"
                                  ? (house.squareFootage | number)
                                  : house.squareFootage
                              }}
                            </td>
                            <td>
                              {{
                                house.bed != "-"
                                  ? (house.bed | number)
                                  : house.bed
                              }}
                            </td>
                            <td>{{ house.bath | number }}</td>
                            <td>{{ house.days | number }}</td>
                            <!-- <td>{{ house.daysPx }}</td> -->
                            <td>
                              {{
                                house.listPrice
                                  | convert: currentcurrency:"1.0-0"
                              }}
                            </td>
                            <td>
                              {{
                                house.closePrice &&
                                house.closePrice != "-" &&
                                house.closePrice != "NaN"
                                  ? (house.closePrice
                                    | convert: currentcurrency:"1.0-0")
                                  : ""
                              }}
                            </td>
                            <td>
                              {{
                                house.salesToList &&
                                house.salesToList != "NaN" &&
                                house.salesToList != "-"
                                  ? (house.salesToList | number: "1.0-2")
                                  : 0
                              }}%
                            </td>
                            <td>
                              {{
                                house.priceSqFt
                                  | convert: currentcurrency:"1.2-2"
                              }}
                            </td>
                            <td>{{ house.saleDate | date: "MM/dd/yyyy" }}</td>
                            <td class="removePrint" *ngIf="accessToken">
                              <button
                                type="button"
                                *ngIf="chart.closedHomes.length > 7"
                                (click)="
                                  deleteFromChart(house.mlsNumber, house.status)
                                "
                              >
                                <i class="material-icons">delete_forever</i>
                              </button>
                              <div
                                class="info"
                                *ngIf="chart.closedHomes.length <= 7"
                              >
                                <a href="javascript:void(0)"
                                  ><i class="material-icons">delete_forever</i>
                                  <div class="overlay">
                                    <p
                                      *ngIf="
                                        chart.relatedProperty.listing_type ==
                                        'Residential'
                                      "
                                    >
                                      {{
                                        "Charts.List.You must have at least seven closed properties"
                                          | translate
                                      }}.
                                    </p>
                                    <p
                                      *ngIf="
                                        chart.relatedProperty.listing_type ==
                                        'Rental'
                                      "
                                    >
                                      {{
                                        "Charts.List.You must have at least seven rented properties"
                                          | translate
                                      }}.
                                    </p>
                                  </div>
                                </a>
                              </div>
                            </td>
                          </tr>
                          <tr *ngIf="chart.closedHomes.length == 0">
                            <td colspan="12" style="text-align: center">
                              {{ "Charts.List.No Data Found" | translate }}.
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!--Chart notes tab-->
            <div
              class="tab-pane fade"
              id="nav-notes"
              role="tabpanel"
              aria-labelledby="nav-notes-tab"
            >
              <div class="generateChart_main_notes">
                <div class="table-responsive">
                  <table class="table table-bordered" *ngIf="chart">
                    <tbody>
                      <tr>
                        <td>
                          {{ "Charts.Notes.Set of Comps" | translate }}<br />
                          {{ "Charts.Notes.Active" | translate }} ({{
                            activeCount
                          }})<br />
                          {{ "Charts.Notes.Pending" | translate }} ({{
                            pendingCount
                          }})<br />
                          {{
                            (chart?.relatedProperty.listing_type == "Rental"
                              ? "Charts.Notes.Rented"
                              : "Charts.Notes.Closed"
                            ) | translate
                          }}
                          ({{ closeCount }})
                        </td>
                        <td>
                          <table>
                            <tbody>
                              <tr *ngIf="!samlFlag">
                                <td colspan="2">
                                  {{
                                    "Charts.Notes.Search Criteria (Date Range)"
                                      | translate
                                  }}
                                  {{
                                    "NewCharts." +
                                      (chart.relatedProperty.minClose
                                        | date: "MMMM") | translate
                                  }}{{
                                    chart.relatedProperty.minClose
                                      | date: " d, yyyy"
                                  }}
                                  -
                                  {{
                                    "NewCharts." +
                                      (chart.updated | date: "MMMM")
                                      | translate
                                  }}{{ chart.updated | date: " d, yyyy" }}
                                </td>
                              </tr>
                              <tr *ngIf="!samlFlag">
                                <td *ngIf="!rentalChartDisplay">
                                  {{ "Charts.Notes.Property Type" | translate }}
                                  =
                                  {{
                                    chart.relatedProperty.propertySubType
                                      ? chart.relatedProperty.propertySubType
                                      : "All"
                                  }}
                                </td>
                                <td *ngIf="rentalChartDisplay">
                                  {{ "Charts.Notes.Furnished" | translate }} =
                                  {{
                                    chart.relatedProperty.furnished
                                      ? chart.relatedProperty.furnished
                                      : "N/A"
                                  }}
                                </td>
                                <td>
                                  {{ "Charts.Notes.Price Range" | translate }} =
                                  {{
                                    chart.relatedProperty.minPrice
                                      | convert: currentcurrency:"1.0-0"
                                  }}
                                  -
                                  <span
                                    *ngIf="chart.relatedProperty.maxPrice != ''"
                                    >{{
                                      chart.relatedProperty.maxPrice
                                        | convert: currentcurrency:"1.0-0"
                                    }}</span
                                  >
                                </td>
                              </tr>
                              <tr *ngIf="!samlFlag">
                                <td
                                  *ngIf="
                                    chart.relatedProperty.subDivisionArray
                                      .length > 0
                                  "
                                >
                                  {{ "Charts.Notes.Subdivision" | translate }} =
                                  {{
                                    chart.relatedProperty.subDivisionArray.join(
                                      ", "
                                    )
                                  }}
                                </td>
                                <td
                                  *ngIf="
                                    chart.relatedProperty.subDivisionArray
                                      .length == 0
                                  "
                                >
                                  {{ "Charts.Notes.Subdivision" | translate }} =
                                  None
                                </td>
                                <td>
                                  {{
                                    "Charts.Notes.Square Footage" | translate
                                  }}
                                  =
                                  {{
                                    chart.relatedProperty.minArea
                                      | number: "1.0-2"
                                  }}
                                  -
                                  {{
                                    chart.relatedProperty.maxArea
                                      | number: "1.0-2"
                                  }}
                                </td>
                              </tr>
                              <tr *ngIf="!samlFlag">
                                <td>
                                  {{ "Charts.Notes.Year Built" | translate }} =
                                  {{ chart.relatedProperty.minYear }} -
                                  {{ chart.relatedProperty.maxYear }}
                                </td>
                                <td
                                  *ngIf="
                                    chart.relatedProperty.zipCodeArray.length >
                                    0
                                  "
                                >
                                  {{ "Charts.Notes.Zip Code" | translate }} =
                                  {{
                                    chart.relatedProperty.zipCodeArray.join(
                                      ", "
                                    )
                                  }}
                                </td>
                                <td
                                  *ngIf="
                                    chart.relatedProperty.zipCodeArray.length ==
                                    0
                                  "
                                >
                                  {{ "Charts.Notes.Zip Code" | translate }} =
                                  None
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </td>
                      </tr>
                      <tr>
                        <td>
                          {{ "Charts.Notes.Best Fit Curve" | translate }}
                          <p>
                            {{ "Charts.Notes.Subject Property" | translate }}
                            {{ chart.targetProperty.squareFootage }} sq ft
                          </p>
                        </td>
                        <!-- <td>{{ 'Charts.Notes.Best Fit Curvetext' | translate }}</td> -->
                        <td
                          [innerHTML]="
                            'Charts.Notes.Best Fit Curvetext'
                              | translate
                                : {
                                    className: 'font-bold',
                                    Sales:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rental
                                        : sales,
                                    closing:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? renting
                                        : closing
                                  }
                          "
                        ></td>
                      </tr>
                      <tr>
                        <td>
                          {{
                            "Charts.Notes.Seasonality Adjustment" | translate
                          }}
                          <p>
                            {{
                              estimated_home_value.seasonlity_value
                                | minus
                                | convert: currentcurrency:"1.0-0"
                            }}
                            <i
                              class="pi pi-arrow-down"
                              *ngIf="estimated_home_value.seasonlity_value < 0"
                            ></i>
                            <i
                              class="pi pi-arrow-up"
                              *ngIf="estimated_home_value.seasonlity_value >= 0"
                            ></i>
                          </p>
                        </td>
                        <td
                          *ngIf="estimated_home_value.seasonlity_value < 0"
                          [innerHTML]="
                            'Charts.Notes.Seasonality Adjustmenttextdeduction'
                              | translate
                                : {
                                    className: 'font-bold',
                                    price:
                                      estimated_home_value.seasonlity_value
                                      | minus
                                      | convert: currentcurrency:'1.0-0',
                                    date: estimated_home_value.projected_date_of_sale,
                                    sale:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rent
                                        : sale,
                                    closed:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rented
                                        : closed
                                  }
                          "
                        ></td>
                        <td
                          *ngIf="estimated_home_value.seasonlity_value >= 0"
                          [innerHTML]="
                            'Charts.Notes.Seasonality Adjustmenttextcredit'
                              | translate
                                : {
                                    className: 'font-bold',
                                    price:
                                      estimated_home_value.seasonlity_value
                                      | minus
                                      | convert: currentcurrency:'1.0-0',
                                    date: estimated_home_value.projected_date_of_sale,
                                    sale:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rent
                                        : sale,
                                    closed:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rented
                                        : closed
                                  }
                          "
                        ></td>
                      </tr>
                      <tr>
                        <td *ngIf="!samlFlag">
                          {{
                            "Charts.Notes.Market Conditions Adjustment"
                              | translate
                          }}
                          <p>
                            {{
                              estimated_home_value.market_condition_value
                                | minus
                                | convert: currentcurrency:"1.0-0"
                            }}
                            <i class="pi pi-arrow-up" *ngIf="monthBool"></i>
                            <i class="pi pi-arrow-down" *ngIf="!monthBool"></i>
                          </p>
                        </td>
                        <td
                          *ngIf="!monthBool && !samlFlag"
                          [innerHTML]="
                            'Charts.Notes.Market Conditions Adjustmenttextdeduction'
                              | translate
                                : {
                                    className: 'font-bold',
                                    price:
                                      estimated_home_value.market_condition_value
                                      | minus
                                      | convert: currentcurrency:'1.0-0',
                                    inventory:
                                      estimated_home_value.months_of_inventory
                                      | number: '1.0-0',
                                    case: monthText
                                  }
                          "
                        ></td>
                        <td
                          *ngIf="monthBool && !samlFlag"
                          [innerHTML]="
                            'Charts.Notes.Market Conditions Adjustmenttextcredit'
                              | translate
                                : {
                                    className: 'font-bold',
                                    price:
                                      estimated_home_value.market_condition_value
                                      | minus
                                      | convert: currentcurrency:'1.0-0',
                                    inventory:
                                      estimated_home_value.months_of_inventory
                                      | number: '1.0-0',
                                    case: monthText
                                  }
                          "
                        ></td>
                      </tr>
                      <tr>
                        <td>
                          {{ "Charts.Notes.Property Adjustment" | translate }}
                          <p>
                            {{
                              estimated_home_value.property_adjustment_value
                                | minus
                                | convert: currentcurrency:"1.0-0"
                            }}
                            <i
                              class="pi pi-arrow-down"
                              *ngIf="
                                estimated_home_value.property_adjustment_value <
                                0
                              "
                            ></i>
                            <i
                              class="pi pi-arrow-up"
                              *ngIf="
                                estimated_home_value.property_adjustment_value >=
                                0
                              "
                            ></i>
                          </p>
                        </td>
                        <td
                          *ngIf="
                            estimated_home_value.property_adjustment_value < 0
                          "
                          [innerHTML]="
                            'Charts.Notes.Property Adjustmenttextdeduction'
                              | translate
                                : {
                                    className: 'font-bold',
                                    closed:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rented
                                        : closed,
                                    price:
                                      estimated_home_value.property_adjustment_value
                                      | minus
                                      | convert: currentcurrency:'1.0-0'
                                  }
                          "
                        ></td>
                        <td
                          *ngIf="
                            estimated_home_value.property_adjustment_value >= 0
                          "
                          [innerHTML]="
                            'Charts.Notes.Property Adjustmenttextcredit'
                              | translate
                                : {
                                    className: 'font-bold',
                                    closed:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rented
                                        : closed,
                                    price:
                                      estimated_home_value.property_adjustment_value
                                      | minus
                                      | convert: currentcurrency:'1.0-0'
                                  }
                          "
                        ></td>
                        <!-- <td [translate]="(estimated_home_value.property_adjustment_value<0)?'Charts.Notes.Property Adjustmenttextdeduction':'Charts.Notes.Property Adjustmenttextcredit'" [translateParams]="{price: estimated_home_value.property_adjustment_value | minus | convert:currentcurrency:'1.0-0'}"></td> -->
                      </tr>
                      <tr>
                        <td>
                          <span
                            [innerHTML]="
                              'Charts.Notes.APC Estimated Market Value'
                                | translate
                            "
                          ></span>
                          <p>
                            {{
                              estimated_home_value.sales_price.lower_bound
                                | convert: currentcurrency:"1.0-0"
                            }}
                            -
                            {{
                              estimated_home_value.sales_price.upper_bound
                                | convert: currentcurrency:"1.0-0"
                            }}
                          </p>
                        </td>
                        <!-- <td>{{ 'Charts.Notes.APC Estimated Market Valuetext' | translate }}</td> -->
                        <td
                          [innerHTML]="
                            'Charts.Notes.APC Estimated Market Valuetext'
                              | translate
                                : {
                                    className: 'font-bold',
                                    closed:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rented
                                        : closed
                                  }
                          "
                        ></td>
                      </tr>
                      <tr>
                        <td>
                          <p
                            [innerHTML]="
                              'Charts.Notes.APC Estimated Sales Price per Square Foot'
                                | translate
                                  : {
                                      className: 'font-bold',
                                      Sales:
                                        chart.relatedProperty.listing_type ==
                                        'Rental'
                                          ? rental
                                          : sales
                                    }
                            "
                          ></p>
                          <p>
                            {{
                              estimated_home_value.sales_price.estimate /
                                estimated_home_value.area
                                | convert: currentcurrency:"1.0-2"
                            }}
                          </p>
                        </td>
                        <td
                          [innerHTML]="
                            'Charts.Notes.APC Estimated Sales Price per Square Foottext'
                              | translate
                                : {
                                    Sales:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rental
                                        : sales,
                                    closed:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rented
                                        : closed
                                  }
                          "
                        ></td>
                      </tr>
                      <tr>
                        <td>
                          <p
                            [innerHTML]="
                              'Charts.Notes.Sales Price to List Price'
                                | translate
                                  : {
                                      className: 'font-bold',
                                      Sales:
                                        chart.relatedProperty.listing_type ==
                                        'Rental'
                                          ? rental
                                          : sales,
                                      closed:
                                        chart.relatedProperty.listing_type ==
                                        'Rental'
                                          ? 'rented'
                                          : closed
                                    }
                            "
                          ></p>
                          <p>
                            {{
                              estimated_home_value.sale_price_to_list_price
                                | number: "1.0-2"
                            }}%
                          </p>
                        </td>
                        <!-- <td [translate]="'Charts.Notes.Sales Price to List Pricetext'" [translateParams]="{price: estimated_home_value.sale_price_to_list_price | number:'1.0-2'}"></td> -->
                        <td
                          [innerHTML]="
                            'Charts.Notes.Sales Price to List Pricetext'
                              | translate
                                : {
                                    className: 'font-bold',
                                    closed:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rented
                                        : closed,
                                    buyers:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? tenants
                                        : buyers,
                                    sellers:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? landlords
                                        : sellers,
                                    Sales:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rental
                                        : sales,
                                    price:
                                      estimated_home_value.sale_price_to_list_price
                                      | number: '1.0-2'
                                  }
                          "
                        ></td>
                      </tr>
                      <tr>
                        <td>
                          <span
                            [innerHTML]="
                              'Charts.Notes.APC Suggested List Price'
                                | translate
                            "
                          ></span>
                          <p>
                            {{
                              estimated_home_value.list_price.lower_bound
                                | convert: currentcurrency:"1.0-0"
                            }}
                            -
                            {{
                              estimated_home_value.list_price.upper_bound
                                | convert: currentcurrency:"1.0-0"
                            }}
                          </p>
                        </td>
                        <!--  <td>{{ 'Charts.Notes.APC Suggested List Pricetext' | translate }}</td> -->
                        <td
                          [innerHTML]="
                            'Charts.Notes.APC Suggested List Pricetext'
                              | translate
                                : {
                                    className: 'font-bold',
                                    buyer:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? tenant
                                        : buyer,
                                    seller:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? landlord
                                        : seller,
                                    Sales:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rental
                                        : sales
                                  }
                          "
                        ></td>
                      </tr>
                      <tr>
                        <td>
                          <p
                            [innerHTML]="
                              'Charts.Notes.APC Probability of Sale'
                                | translate
                                  : {
                                      sale:
                                        chart.relatedProperty.listing_type ==
                                        'Rental'
                                          ? 'Rent'
                                          : 'Sale'
                                    }
                            "
                          ></p>
                          <p>84.1%</p>
                        </td>
                        <!-- <td [translate]="'Charts.Notes.APC Probability of Saletext'" [translateParams]="{price: '84.1%'}"></td> -->
                        <td
                          [innerHTML]="
                            'Charts.Notes.APC Probability of Saletext'
                              | translate
                                : {
                                    className: 'font-bold',
                                    buyer:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? tenant
                                        : buyer,
                                    seller:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? landlord
                                        : seller,
                                    sell:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rent
                                        : 'sell',
                                    price: '84.1%',
                                    sale:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rent
                                        : sale,
                                    Sale:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? Rent
                                        : Sale
                                  }
                          "
                        ></td>
                      </tr>
                      <tr>
                        <td>
                          <span
                            [innerHTML]="
                              'Charts.Notes.APC Days on Market' | translate
                            "
                          ></span>
                          <p>
                            {{
                              estimated_home_value.subject_property_days_on_market
                                | number: "1.0-0"
                            }}
                          </p>
                        </td>
                        <!-- <td [translate]="'Charts.Notes.APC Days on Markettext'" [translateParams]="{price: estimated_home_value.subject_property_days_on_market | number:'1.0-0'}"></td> -->
                        <td
                          [innerHTML]="
                            'Charts.Notes.APC Days on Markettext'
                              | translate
                                : {
                                    className: 'font-bold',
                                    price:
                                      estimated_home_value.subject_property_days_on_market
                                      | number: '1.0-0',
                                    seller:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? landlord
                                        : seller,
                                    sale:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rent
                                        : sale
                                  }
                          "
                        ></td>
                      </tr>
                      <tr>
                        <td>
                          {{
                            "Charts.Notes.Price Adjustments no less than"
                              | translate
                          }}
                          <p>
                            {{
                              estimated_home_value.sales_price.upper_bound -
                                estimated_home_value.sales_price.lower_bound
                                | convert: currentcurrency:"1.0-0"
                            }}
                          </p>
                        </td>
                        <!-- <td [translate]="'Charts.Notes.Price Adjustments no less thantext'" [translateParams]="{price: estimated_home_value.sales_price.upper_bound - estimated_home_value.sales_price.lower_bound | convert:currentcurrency:'1.0-0'}"></td> -->
                        <td
                          [innerHTML]="
                            'Charts.Notes.Price Adjustments no less thantext'
                              | translate
                                : {
                                    className: 'font-bold',
                                    price:
                                      estimated_home_value.sales_price
                                        .upper_bound -
                                        estimated_home_value.sales_price
                                          .lower_bound
                                      | convert: currentcurrency:'1.0-0',
                                    buyers:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? tenants
                                        : buyers,
                                    sale:
                                      chart.relatedProperty.listing_type ==
                                      'Rental'
                                        ? rent
                                        : sale
                                  }
                          "
                        ></td>
                      </tr>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
            <!--Chart report tab-->
            <div
              class="tab-pane fade"
              id="nav-report"
              role="tabpanel"
              aria-labelledby="nav-report-tab"
            >
              <div class="generateChart_main_report">
                <div class="ReportAnalytics">
                  <div class="jumbotron">
                    <h1 class="display-4 mb-0">
                      {{ "Charts.Report.APC Residential Property" | translate }}
                    </h1>
                    <h3 class="pb-2">
                      {{ "Charts.Report.Market Analysis" | translate }}
                    </h3>
                  </div>
                  <div
                    class="
                      row
                      no-gutters
                      justify-content-center
                      ReportProfiletop
                      noBG
                    "
                  >
                    <div class="col-12 col-lg-10">
                      <div class="row align-items-center">
                        <div class="col-xs-12 col-sm-4">
                          <table
                            *ngIf="chart"
                            class="table table-bordered mb-3 mb-sm-0"
                          >
                            <tbody>
                              <tr>
                                <td *ngIf="client_id">
                                  {{ selectedClient.firstname }}
                                  {{ selectedClient.lastname }}
                                </td>
                                <td *ngIf="!client_id">
                                  {{
                                    chart.client.first
                                      ? chart.client.first
                                      : "-"
                                  }}
                                  {{
                                    chart.client.last ? chart.client.last : "-"
                                  }}
                                </td>
                              </tr>
                              <tr>
                                <td>
                                  {{
                                    chart.targetProperty.address
                                      ? chart.targetProperty.address
                                      : "-"
                                  }}
                                </td>
                              </tr>
                              <tr>
                                <td>
                                  {{
                                    chart.targetProperty.state
                                      ? chart.targetProperty.state
                                      : "-"
                                  }}
                                  {{
                                    chart.targetProperty.zip
                                      ? chart.targetProperty.zip
                                      : "-"
                                  }}
                                </td>
                              </tr>
                              <tr>
                                <td>
                                  {{
                                    (chart.relatedProperty.listing_type ==
                                    "Rental"
                                      ? "NewCharts.Rental"
                                      : "NewCharts.Residential"
                                    ) | translate
                                  }}
                                </td>
                              </tr>
                              <tr>
                                <td>
                                  {{
                                    "NewCharts." +
                                      (chart.targetProperty.seasonality
                                        | date: "MMMM") | translate
                                  }}{{
                                    chart.targetProperty.seasonality
                                      | date: " d, yyyy"
                                  }}
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                        <div class="col-xs-12 col-sm-8">
                          <div class="estimated_mlsDetail" *ngIf="chart">
                            <div
                              class="estimated_mlsDetail_property"
                              [ngStyle]="{
                                'background-image':
                                  'url(' +
                                  (chart.targetProperty.image ||
                                    '../../assets/images/house-icon-large.png') +
                                  ')'
                              }"
                            ></div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <!--chart report-->
                <div class="reportchart pagebreak">
                  <h3>{{ "Charts.Report.Chart" | translate }}</h3>
                  <div class="generateChart_main_chart">
                    <div class="propertystatus">
                      <ul>
                        <li>
                          <span
                            [ngClass]="toggles.active ? 'active' : ''"
                          ></span
                          >{{ "Charts.Report.Active" | translate }} ({{
                            activeCount
                          }})
                        </li>
                        <li>
                          <span
                            [ngClass]="toggles.underContract ? 'pending' : ''"
                          ></span
                          >{{ "Charts.Report.Pending" | translate }} ({{
                            pendingCount
                          }})
                        </li>
                        <li>
                          <span class="closed"></span
                          >{{
                            (chart?.relatedProperty.listing_type == "Rental"
                              ? "NewCharts.Rented"
                              : "NewCharts.Closed"
                            ) | translate
                          }}
                          ({{ closeCount }})
                        </li>
                        <li *ngIf="chart">
                          <img
                            src="assets/images/house-icon.png"
                            alt="home"
                            width="20"
                          />
                          {{
                            chart.property_id
                              ? chart.targetProperty.address
                              : chart.chart_title
                          }}
                        </li>
                      </ul>
                    </div>
                    <p
                      *ngIf="!samlFlag"
                      class="monthLegend"
                      style="text-align: center"
                    >
                      {{ "Charts.Market Conditions" | translate }} -
                      {{ monthValueWhole }}
                      {{ "Charts.Months Of Inventory" | translate }} -
                      {{ marketTypeText }}
                      {{ "Charts.Market" | translate }}
                    </p>
                    <div class="ChartDesign">
                      <div *ngIf="show" style="display: block">
                        <app-chartjs
                          [plotResp]="plotResp"
                          [showoutlier]="showoutlier"
                          [redirect]="redirect"
                          [datasets]="scatterChartData"
                          [chart]="chart"
                          [togglesActive]="togglesActive"
                          [togglesPending]="togglesPending"
                          (sendMessage)="showDataFromParent($event)"
                        >
                        </app-chartjs>
                      </div>
                    </div>
                    <div class="estimated ReportProfile vAlign">
                      <table class="table">
                        <tbody>
                          <tr>
                            <td>
                              <div class="estimated_mlsDetail" *ngIf="chart">
                                <div
                                  *ngIf="chart.targetProperty.image"
                                  class="
                                    estimated_mlsDetail_property
                                    repprortybnr
                                  "
                                  [ngStyle]="{
                                    'background-image':
                                      'url(' +
                                      (chart.targetProperty.image ||
                                        'assets/images/logoDefault.png') +
                                      ')'
                                  }"
                                ></div>
                                <div
                                  class="prof-image-container"
                                  *ngIf="!chart.targetProperty.image"
                                >
                                  <!-- <div class="no-image">
                                    {{'Sign Out.No Image' | translate}}
                                  </div> -->
                                  <div
                                    class="
                                      estimated_mlsDetail_property
                                      repprortybnr
                                    "
                                    [ngStyle]="{
                                      'background-image':
                                        'url(' +
                                        (chart.targetProperty.image ||
                                          'assets/images/house-icon-large.png') +
                                        ')'
                                    }"
                                  ></div>
                                </div>
                              </div>
                            </td>
                            <td>
                              <div class="estimated_value">
                                <div
                                  class="estimated_value_title"
                                  *ngIf="estimated_home_value"
                                >
                                  <h3
                                    [innerHTML]="
                                      'Charts.Report.APC Estimated Market Value'
                                        | translate
                                    "
                                  ></h3>
                                  <h3>
                                    {{
                                      estimated_home_value.sales_price
                                        .lower_bound
                                        | convert: currentcurrency:"1.0-0"
                                    }}
                                    -
                                    {{
                                      estimated_home_value.sales_price
                                        .upper_bound
                                        | convert: currentcurrency:"1.0-0"
                                    }}
                                  </h3>
                                </div>
                                <div
                                  class="estimated_value_rates"
                                  *ngIf="chart && accessToken"
                                >
                                  <table class="table table-bordered">
                                    <tbody>
                                      <tr>
                                        <td>
                                          {{
                                            "Charts.Report.Seasonality"
                                              | translate
                                          }}
                                        </td>
                                        <td>
                                          <p-calendar
                                            [locale]="es"
                                            [showIcon]="true"
                                            [yearNavigator]="true"
                                            [monthNavigator]="true"
                                            yearRange="1990:2050"
                                            dateFormat="mm/dd/yy"
                                            [(ngModel)]="seasonalityDate"
                                            (onSelect)="
                                              changeSeasonality($event)
                                            "
                                          >
                                            <ng-template
                                              pTemplate="date"
                                              let-date
                                            >
                                              <span
                                                [ngStyle]="{
                                                  backgroundColor:
                                                    date.day < 21 &&
                                                    date.day > 10
                                                      ? 'initial'
                                                      : 'initial'
                                                }"
                                                style="
                                                  border-radius: 50%;
                                                  padding: 0.25em;
                                                  width: 1.75em;
                                                  height: 1.75em;
                                                  display: block;
                                                  color: #000;
                                                "
                                                >{{ date.day }}</span
                                              >
                                            </ng-template>
                                          </p-calendar>
                                        </td>
                                      </tr>
                                      <tr>
                                        <td>
                                          {{
                                            "Charts.Report.SquareFootage"
                                              | translate
                                          }}
                                        </td>
                                        <td>
                                          <input
                                            id="input"
                                            type="text"
                                            size="30"
                                            class="form-control"
                                            (input)="changeSquareft($event)"
                                            value="{{
                                              chart.targetProperty.squareFootage
                                            }}"
                                          />
                                        </td>
                                      </tr>
                                    </tbody>
                                  </table>
                                </div>
                              </div>
                            </td>
                            <td>
                              <div class="estimated_mlsDetail" *ngIf="chart">
                                <div
                                  class="
                                    estimated_mlsDetail_property
                                    repcrtprof
                                  "
                                >
                                  <img
                                    src="{{
                                      chart.agent.logo_250X250 ||
                                        'assets/images/house-icon-large.png'
                                    }}"
                                  />
                                </div>
                              </div>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <p
                    [innerHTML]="
                      'Charts.Report.Market Analysistext'
                        | translate
                          : {
                              sales:
                                chart?.relatedProperty.listing_type == 'Rental'
                                  ? rental
                                  : sales,
                              closed:
                                chart?.relatedProperty.listing_type == 'Rental'
                                  ? rented
                                  : closed
                            }
                    "
                  ></p>
                </div>
                <!--Analytics report-->
                <div class="reportchart pagebreak">
                  <h3>{{ "Charts.Report.Analytics" | translate }}</h3>
                  <div class="generateChart_main_analytics">
                    <div class="table-responsive">
                      <table class="table table-bordered" *ngIf="chart">
                        <thead>
                          <tr *ngIf="!samlFlag" class="trbgcolor">
                            <th colspan="7">
                              <h6>
                                {{
                                  "Charts.Report.Search Criteria" | translate
                                }}
                              </h6>
                            </th>
                          </tr>
                          <tr *ngIf="!samlFlag">
                            <th>
                              {{ "Charts.Report.Property Type" | translate }}
                            </th>
                            <th>
                              {{ "Charts.Report.Subdivisions" | translate }}(s)
                            </th>
                            <th>
                              {{ "Charts.Report.Year Built" | translate }}
                            </th>
                            <th>
                              {{ "Charts.Report.Price Range" | translate }}
                            </th>
                            <th>{{ "Charts.Report.SqFt" | translate }}</th>
                            <th>{{ "Charts.Report.Zip(s)" | translate }}</th>
                            <th>
                              {{ "Charts.Report.Date Range" | translate }}
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr *ngIf="chart && !samlFlag">
                            <td>
                              {{
                                chart.relatedProperty.propertySubType
                                  ? chart.relatedProperty.propertySubType
                                  : "All"
                              }}
                            </td>
                            <td
                              *ngIf="
                                chart.relatedProperty.subDivisionArray.length >
                                0
                              "
                            >
                              {{
                                chart.relatedProperty.subDivisionArray.join(
                                  ", "
                                )
                              }}
                            </td>
                            <td
                              *ngIf="
                                chart.relatedProperty.subDivisionArray.length ==
                                0
                              "
                            >
                              None
                            </td>
                            <td>
                              {{ chart.relatedProperty.minYear }} -
                              {{ chart.relatedProperty.maxYear }}
                            </td>
                            <td>
                              {{
                                chart.relatedProperty.minPrice
                                  | convert: currentcurrency:"1.0-0"
                              }}
                              -
                              <span
                                *ngIf="chart.relatedProperty.maxPrice != ''"
                                >{{
                                  chart.relatedProperty.maxPrice
                                    | convert: currentcurrency:"1.0-0"
                                }}</span
                              >
                            </td>
                            <td>
                              {{
                                chart.relatedProperty.minArea | number: "1.0-0"
                              }}
                              -
                              {{
                                chart.relatedProperty.maxArea | number: "1.0-0"
                              }}
                            </td>
                            <td
                              *ngIf="
                                chart.relatedProperty.zipCodeArray.length > 0
                              "
                            >
                              {{
                                chart.relatedProperty.zipCodeArray.join(", ")
                              }}
                            </td>
                            <td
                              *ngIf="
                                chart.relatedProperty.zipCodeArray.length == 0
                              "
                            >
                              None
                            </td>
                            <td>
                              {{
                                "NewCharts." +
                                  (chart.relatedProperty.minClose
                                    | date: "MMMM") | translate
                              }}{{
                                chart.relatedProperty.minClose
                                  | date: " d, yyyy"
                              }}
                              -
                              {{
                                "NewCharts." + (chart.updated | date: "MMMM")
                                  | translate
                              }}{{ chart.updated | date: " d, yyyy" }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="table-analytic">
                      <table
                        class="table table-bordered"
                        *ngIf="estimated_home_value"
                      >
                        <thead>
                          <tr class="trbgcolor">
                            <th colspan="2">
                              <h6>
                                {{
                                  "Charts.Analytics.Subject Property Analytics"
                                    | translate
                                }}
                              </h6>
                            </th>
                          </tr>
                        </thead>
                        <tbody>
                          <tr>
                            <td>
                              {{
                                "Charts.Analytics.Seasonality Adjustment"
                                  | translate
                              }}
                              <div class="info">
                                <a href="javascript:void(0)"
                                  ><i class="pi pi-info-circle"></i>
                                  <div class="overlay">
                                    <h6>
                                      {{
                                        "Charts.Analytics.Seasonality Adjustment"
                                          | translate
                                      }}
                                    </h6>
                                    <p>
                                      {{
                                        "Charts.Analytics.Seasonalitytext"
                                          | translate
                                      }}
                                    </p>
                                  </div>
                                </a>
                              </div>
                            </td>
                            <td>
                              {{
                                estimated_home_value.seasonlity_value
                                  | minus
                                  | convert: currentcurrency:"1.0-0"
                              }}
                              <i
                                class="pi pi-arrow-down"
                                *ngIf="
                                  estimated_home_value.seasonlity_value < 0
                                "
                              ></i>
                              <i
                                class="pi pi-arrow-up"
                                *ngIf="
                                  estimated_home_value.seasonlity_value >= 0
                                "
                              ></i>
                            </td>
                          </tr>
                          <tr>
                            <td *ngIf="!samlFlag">
                              {{
                                "Charts.Analytics.Market Conditions Adjustment"
                                  | translate
                              }}
                              <div class="info">
                                <a href="javascript:void(0)"
                                  ><i class="pi pi-info-circle"></i>
                                  <div class="overlay">
                                    <h6>
                                      {{
                                        "Charts.Analytics.Market Conditions Adjustment"
                                          | translate
                                      }}
                                    </h6>
                                    <p>
                                      {{
                                        "Charts.Analytics.MarketAdjustmenttext"
                                          | translate
                                      }}
                                    </p>
                                  </div>
                                </a>
                              </div>
                            </td>
                            <td *ngIf="!samlFlag">
                              {{
                                estimated_home_value.market_condition_value
                                  | minus
                                  | convert: currentcurrency:"1.0-0"
                              }}
                              <i
                                class="pi pi-arrow-down"
                                *ngIf="
                                  estimated_home_value.market_condition_value <
                                  0
                                "
                              ></i>
                              <i
                                class="pi pi-arrow-up"
                                *ngIf="
                                  estimated_home_value.market_condition_value >=
                                  0
                                "
                              ></i>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              {{
                                "Charts.Analytics.Property Adjustment"
                                  | translate
                              }}
                              <div class="info">
                                <a href="javascript:void(0)"
                                  ><i class="pi pi-info-circle"></i>
                                  <div class="overlay">
                                    <h6>
                                      {{
                                        "Charts.Analytics.Property Adjustment"
                                          | translate
                                      }}
                                    </h6>
                                    <p>
                                      {{
                                        "Charts.Analytics.PropertyAdjustmenttext"
                                          | translate
                                      }}
                                    </p>
                                  </div>
                                </a>
                              </div>
                            </td>
                            <td>
                              {{
                                estimated_home_value.property_adjustment_value
                                  | minus
                                  | convert: currentcurrency:"1.0-0"
                              }}
                              <i
                                class="pi pi-arrow-down"
                                *ngIf="
                                  estimated_home_value.property_adjustment_value <
                                  0
                                "
                              ></i>
                              <i
                                class="pi pi-arrow-up"
                                *ngIf="
                                  estimated_home_value.property_adjustment_value >=
                                  0
                                "
                              ></i>
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <span
                                [innerHTML]="
                                  'Charts.Analytics.APC Estimated Market Value'
                                    | translate
                                "
                              ></span>
                              <div class="info">
                                <a href="javascript:void(0)"
                                  ><i class="pi pi-info-circle"></i>
                                  <div class="overlay">
                                    <h6
                                      [innerHTML]="
                                        'Charts.Analytics.APC Estimated Market Value'
                                          | translate
                                      "
                                    ></h6>
                                    <p
                                      [innerHTML]="
                                        'Charts.Analytics.APCEstimatedMarkettext'
                                          | translate
                                            : {
                                                Sales:
                                                  chart.relatedProperty
                                                    .listing_type == 'Rental'
                                                    ? rental
                                                    : sales,
                                                Sale:
                                                  chart.relatedProperty
                                                    .listing_type == 'Rental'
                                                    ? Rent
                                                    : Sale,
                                                sold:
                                                  chart.relatedProperty
                                                    .listing_type == 'Rental'
                                                    ? rented
                                                    : sold
                                              }
                                      "
                                    ></p>
                                  </div>
                                </a>
                              </div>
                            </td>
                            <td>
                              {{
                                estimated_home_value.sales_price.lower_bound
                                  | convert: currentcurrency:"1.0-0"
                              }}
                              -
                              {{
                                estimated_home_value.sales_price.upper_bound
                                  | convert: currentcurrency:"1.0-0"
                              }}
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <span
                                [innerHTML]="
                                  'Charts.Analytics.APC Suggested List Price'
                                    | translate
                                "
                              ></span>
                              <div class="info">
                                <a href="javascript:void(0)"
                                  ><i class="pi pi-info-circle"></i>
                                  <div class="overlay">
                                    <h6
                                      [innerHTML]="
                                        'Charts.Analytics.APC Suggested List Price'
                                          | translate
                                      "
                                    ></h6>
                                    <p
                                      [innerHTML]="
                                        'Charts.Analytics.APCSuggestedListPricetext'
                                          | translate
                                            : {
                                                Sales:
                                                  chart.relatedProperty
                                                    .listing_type == 'Rental'
                                                    ? rental
                                                    : sales
                                              }
                                      "
                                    ></p>
                                  </div>
                                </a>
                              </div>
                            </td>
                            <td>
                              {{
                                estimated_home_value.list_price.lower_bound
                                  | convert: currentcurrency:"1.0-0"
                              }}
                              -
                              {{
                                estimated_home_value.list_price.upper_bound
                                  | convert: currentcurrency:"1.0-0"
                              }}
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <span
                                [innerHTML]="
                                  'Charts.Analytics.APC Days on Market'
                                    | translate
                                "
                              ></span>
                              <div class="info">
                                <a href="javascript:void(0)"
                                  ><i class="pi pi-info-circle"></i>
                                  <div class="overlay">
                                    <h6>
                                      {{
                                        "Charts.Analytics.APC Days on Market"
                                          | translate
                                      }}
                                    </h6>
                                    <p
                                      *ngIf="
                                        chart.relatedProperty.listing_type ==
                                        'Residential'
                                      "
                                    >
                                      {{
                                        "Charts.Analytics.APCDaysonMarkettext"
                                          | translate
                                      }}
                                    </p>
                                    <p
                                      *ngIf="
                                        chart.relatedProperty.listing_type ==
                                        'Rental'
                                      "
                                    >
                                      {{
                                        "Charts.Analytics.APCDaysonMarketRenttext"
                                          | translate
                                      }}
                                    </p>
                                  </div>
                                </a>
                              </div>
                            </td>
                            <td>
                              {{
                                estimated_home_value.subject_property_days_on_market
                                  | number: "1.0-0"
                              }}
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <span
                                [innerHTML]="
                                  'Charts.Analytics.Sales to List Price'
                                    | translate
                                      : {
                                          Sales:
                                            chart.relatedProperty
                                              .listing_type == 'Rental'
                                              ? rental
                                              : sales
                                        }
                                "
                              ></span>
                              <div class="info">
                                <a href="javascript:void(0)"
                                  ><i class="pi pi-info-circle"></i>
                                  <div class="overlay">
                                    <h6
                                      [innerHTML]="
                                        'Charts.Analytics.Sales to List Price'
                                          | translate
                                            : {
                                                Sales:
                                                  chart.relatedProperty
                                                    .listing_type == 'Rental'
                                                    ? rental
                                                    : sales
                                              }
                                      "
                                    ></h6>
                                    <p
                                      [innerHTML]="
                                        'Charts.Analytics.SalestoListPricetext'
                                          | translate
                                            : {
                                                Sales:
                                                  chart.relatedProperty
                                                    .listing_type == 'Rental'
                                                    ? rental
                                                    : sales,
                                                sales:
                                                  chart.relatedProperty
                                                    .listing_type == 'Rental'
                                                    ? rental2
                                                    : sales2
                                              }
                                      "
                                    ></p>
                                  </div>
                                </a>
                              </div>
                            </td>
                            <td>
                              {{
                                estimated_home_value.sale_price_to_list_price
                                  | number: "1.0-2"
                              }}%
                            </td>
                          </tr>
                          <tr>
                            <td>
                              <span
                                [innerHTML]="
                                  'Charts.Analytics.APC Estimated Sales Price per SqFt'
                                    | translate
                                      : {
                                          Sales:
                                            chart.relatedProperty
                                              .listing_type == 'Rental'
                                              ? rental
                                              : sales
                                        }
                                "
                              ></span>
                              <div class="info">
                                <a href="javascript:void(0)"
                                  ><i class="pi pi-info-circle"></i>
                                  <div class="overlay">
                                    <h6
                                      [innerHTML]="
                                        'Charts.Analytics.APC Estimated Sales Price per SqFt'
                                          | translate
                                            : {
                                                Sales:
                                                  chart.relatedProperty
                                                    .listing_type == 'Rental'
                                                    ? rental
                                                    : sales
                                              }
                                      "
                                    ></h6>
                                    <p
                                      [innerHTML]="
                                        'Charts.Analytics.APC Estimated Sales Price per SqFttext'
                                          | translate
                                            : {
                                                Sales:
                                                  chart.relatedProperty
                                                    .listing_type == 'Rental'
                                                    ? rental
                                                    : sales
                                              }
                                      "
                                    ></p>
                                  </div>
                                </a>
                              </div>
                            </td>
                            <td>
                              {{
                                estimated_home_value.sales_price.estimate /
                                  estimated_home_value.area
                                  | convert: currentcurrency:"1.0-2"
                              }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                    <div class="table-sale">
                      <div class="table-responsive" *ngIf="plotResp">
                        <table
                          class="table table-bordered"
                          (mouseout)="hoverIndex = 2"
                        >
                          <tbody>
                            <tr>
                              <td>
                                <table class="table">
                                  <thead>
                                    <tr class="trbgcolor">
                                      <th>
                                        <h6
                                          *ngIf="!rentalChartDisplay"
                                          [innerHTML]="
                                            'Charts.Analytics.APC Probability of Sale (POS)'
                                              | translate
                                          "
                                        ></h6>
                                        <h6
                                          *ngIf="rentalChartDisplay"
                                          [innerHTML]="
                                            'Charts.Analytics.APC Probability of Rent (POR)'
                                              | translate
                                          "
                                        ></h6>
                                      </th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr>
                                      <td>
                                        <div class="table-sale_chart">
                                          <canvas
                                            baseChart
                                            width="300"
                                            height="300"
                                            [datasets]="lineChartData"
                                            [labels]="lineChartLabels"
                                            [options]="lineChartOptions"
                                            [colors]="lineChartColors"
                                            [legend]="lineChartLegend"
                                            [chartType]="lineChartType"
                                            [plugins]="lineChartPlugins"
                                          >
                                          </canvas>
                                        </div>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </td>
                              <td>
                                <table class="table">
                                  <thead>
                                    <tr class="trbgcolor">
                                      <th>
                                        <h6>
                                          {{
                                            "Charts.Analytics.POS" | translate
                                          }}
                                        </h6>
                                      </th>
                                      <th>
                                        <h6>
                                          {{
                                            "Charts.Report.List Price"
                                              | translate
                                          }}
                                        </h6>
                                      </th>
                                      <th>
                                        <h6>
                                          {{
                                            "Charts.Analytics.DOM" | translate
                                          }}
                                        </h6>
                                      </th>
                                    </tr>
                                  </thead>
                                  <tbody *ngIf="plotResp">
                                    <tr
                                      *ngFor="
                                        let row of plotResp.estimated_home_value
                                          .probability_of_sale_table;
                                        index as i
                                      "
                                      [ngClass]="{ rowColor: i == hoverIndex }"
                                    >
                                      <td>
                                        <h6>{{ row.probability_of_sale }}%</h6>
                                      </td>
                                      <td>
                                        <h6>
                                          {{
                                            row.list_price
                                              | convert: currentcurrency:"1.0-0"
                                          }}
                                        </h6>
                                      </td>
                                      <td>
                                        <h6>
                                          {{
                                            row.days_on_market | number: "1.0-0"
                                          }}
                                        </h6>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </td>
                              <td>
                                <table class="table">
                                  <thead>
                                    <tr class="trbgcolor">
                                      <th colspan="2">
                                        <h6
                                          [innerHTML]="
                                            'Charts.Report.APC Days on Market (DOM)'
                                              | translate
                                          "
                                        ></h6>
                                      </th>
                                    </tr>
                                  </thead>
                                  <tbody>
                                    <tr>
                                      <td>
                                        <div class="table-sale_chart">
                                          <canvas
                                            baseChart
                                            width="300"
                                            height="300"
                                            [datasets]="lineChartData2"
                                            [labels]="lineChartLabels"
                                            [options]="lineChartOptions2"
                                            [colors]="lineChartColors"
                                            [legend]="lineChartLegend"
                                            [chartType]="lineChartType"
                                            [plugins]="lineChartPlugins"
                                          >
                                          </canvas>
                                        </div>
                                      </td>
                                    </tr>
                                  </tbody>
                                </table>
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <div class="pagebreak"></div>
                    <br />
                    <div style="text-align: center">Analytics Descriptions</div>
                    <br />
                    <div class="AnalyticSearch">
                      <table class="table table-bordered">
                        <tbody>
                          <tr>
                            <td>
                              {{ "Charts.Report.Search Criteria" | translate }}
                            </td>
                            <td
                              [innerHTML]="
                                'Charts.Report.Search Criteriatext'
                                  | translate
                                    : {
                                        closed:
                                          chart?.relatedProperty.listing_type ==
                                          'Rental'
                                            ? rented
                                            : closed
                                      }
                              "
                            ></td>
                          </tr>
                          <tr>
                            <td>
                              {{
                                "Charts.Report.Seasonality Adjustment"
                                  | translate
                              }}
                            </td>
                            <td
                              [innerHTML]="
                                'Charts.Report.Seasonality Adjustmenttext'
                                  | translate
                                    : {
                                        close:
                                          chart?.relatedProperty.listing_type ==
                                          'Rental'
                                            ? rent
                                            : 'close'
                                      }
                              "
                            ></td>
                          </tr>
                          <tr *ngIf="!samlFlag">
                            <td>
                              {{
                                "Charts.Report.Market Conditions Adjustment"
                                  | translate
                              }}
                            </td>
                            <td>
                              {{
                                "Charts.Report.Market Conditions Adjustmenttext"
                                  | translate
                              }}
                            </td>
                          </tr>
                          <tr>
                            <td>
                              {{
                                "Charts.Report.Property Features Adjustment"
                                  | translate
                              }}
                            </td>
                            <td
                              [innerHTML]="
                                'Charts.Report.Property Features Adjustmenttext'
                                  | translate
                                    : {
                                        closed:
                                          chart?.relatedProperty.listing_type ==
                                          'Rental'
                                            ? rented
                                            : closed
                                      }
                              "
                            ></td>
                          </tr>
                          <tr>
                            <td>
                              <span
                                [innerHTML]="
                                  'Charts.Report.APC Estimated Market Value'
                                    | translate
                                "
                              ></span>
                            </td>
                            <td
                              [innerHTML]="
                                'Charts.Report.APC Estimated Market Valuetext'
                                  | translate
                                    : {
                                        sales:
                                          chart?.relatedProperty.listing_type ==
                                          'Rental'
                                            ? rental
                                            : sales
                                      }
                              "
                            ></td>
                          </tr>
                          <tr>
                            <td>
                              <span
                                [innerHTML]="
                                  'Charts.Report.APC Suggested List Price'
                                    | translate
                                "
                              ></span>
                            </td>
                            <td
                              [innerHTML]="
                                'Charts.Report.APC Suggested List Pricetext'
                                  | translate
                                    : {
                                        sale:
                                          chart?.relatedProperty.listing_type ==
                                          'Rental'
                                            ? rental
                                            : sale
                                      }
                              "
                            ></td>
                          </tr>
                          <tr>
                            <td>
                              <span
                                [innerHTML]="
                                  'Charts.Report.APC Days on Market' | translate
                                "
                              ></span>
                            </td>
                            <td
                              [innerHTML]="
                                'Charts.Report.APC Days on Markettext'
                                  | translate
                                    : {
                                        contract:
                                          chart?.relatedProperty.listing_type ==
                                          'Rental'
                                            ? lease
                                            : contract
                                      }
                              "
                            ></td>
                          </tr>
                          <tr>
                            <td
                              [innerHTML]="
                                'Charts.Report.Sales Price to List Price'
                                  | translate
                                    : {
                                        Sales:
                                          chart?.relatedProperty.listing_type ==
                                          'Rental'
                                            ? rental
                                            : sales
                                      }
                              "
                            ></td>
                            <td
                              [innerHTML]="
                                'Charts.Report.Sales Price to List Pricetext'
                                  | translate
                                    : {
                                        closed:
                                          chart?.relatedProperty.listing_type ==
                                          'Rental'
                                            ? rented
                                            : closed,
                                        buyers:
                                          chart?.relatedProperty.listing_type ==
                                          'Rental'
                                            ? tenants
                                            : buyers,
                                        sellers:
                                          chart?.relatedProperty.listing_type ==
                                          'Rental'
                                            ? landlords
                                            : sellers
                                      }
                              "
                            ></td>
                          </tr>
                          <tr>
                            <td
                              [innerHTML]="
                                'Charts.Report.APC Estimated Sales $/SqFt'
                                  | translate
                                    : {
                                        Sales:
                                          chart?.relatedProperty.listing_type ==
                                          'Rental'
                                            ? rental
                                            : sales
                                      }
                              "
                            ></td>
                            <td>
                              {{
                                "Charts.Report.APC Estimated Sales $/SqFttext"
                                  | translate
                              }}
                            </td>
                          </tr>
                          <tr>
                            <td
                              [innerHTML]="
                                'Charts.Report.APC Probability of Sale'
                                  | translate
                                    : {
                                        Sale:
                                          chart?.relatedProperty.listing_type ==
                                          'Rental'
                                            ? Rent
                                            : Sale
                                      }
                              "
                            ></td>
                            <td
                              [innerHTML]="
                                'Charts.Report.APC Probability of Saletext'
                                  | translate
                                    : {
                                        rent:
                                          chart?.relatedProperty.listing_type ==
                                          'Rental'
                                            ? rent
                                            : 'close'
                                      }
                              "
                            ></td>
                          </tr>
                          <tr>
                            <td colspan="2">
                              {{ "Charts.Report.internaltext" | translate }}
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                </div>
                <div class="pagebreak"></div>
                <!--map report-->
                <div class="reportchart pagebreak">
                  <h3>{{ "Charts.Report.Map and List" | translate }}</h3>
                  <agm-map
                    [streetViewControl]="false"
                    [scrollwheel]="false"
                    [zoomControl]="false"
                    [mapTypeControl]="false"
                    [fullscreenControl]="false"
                    [scaleControl]="false"
                    (mapReady)="onMapReadyReport($event)"
                  >
                  </agm-map>
                  <div class="maplegends">
                    <ul>
                      <li>
                        <img src="assets/images/darkgreen_MarkerO.png" alt="" />
                        {{ "Charts.Report.Active" | translate }}
                      </li>
                      <li>
                        <img src="assets/images/yellow_MarkerO.png" alt="" />{{
                          "Charts.Report.Pending" | translate
                        }}
                      </li>
                      <li>
                        <img src="assets/images/red_MarkerO.png" alt="" />{{
                          (chart?.relatedProperty.listing_type == "Rental"
                            ? "NewCharts.Rented"
                            : "NewCharts.Closed"
                          ) | translate
                        }}
                      </li>
                      <li *ngIf="chart">
                        <img
                          src="assets/images/house-icon.png"
                          alt="home"
                          width="20"
                        />
                        {{ chart.targetProperty.address }}
                      </li>
                    </ul>
                  </div>
                </div>
                <div class="pagebreak"></div>
                <!--List report-->
                <div class="reportchart List">
                  <h3>{{ "Charts.Report.List" | translate }}</h3>
                  <div class="generateChart_main_tablist">
                    <div *ngIf="chart" class="justify-content-center">
                      <h3 *ngIf="showActiveTable" class="active">
                        {{ "Charts.Report.Active" | translate }}
                      </h3>
                      <div
                        *ngIf="showActiveTable"
                        class="table-responsive justify-content-center"
                        style="overflow-x: visible"
                      >
                        <table class="table table-bordered">
                          <thead class="thead-light">
                            <tr>
                              <th>{{ "Charts.Report.Photos" | translate }}</th>
                              <th>{{ "Charts.Report.MLS" | translate }}</th>
                              <th>{{ "Charts.Report.Address" | translate }}</th>
                              <th>
                                {{ "Charts.Report.Year Built" | translate }}
                              </th>
                              <th>{{ "Charts.Report.SqFt" | translate }}</th>
                              <th>{{ "Charts.Report.Bed" | translate }}</th>
                              <th>{{ "Charts.Report.Bath" | translate }}</th>
                              <th>{{ "Charts.Report.DOM" | translate }}</th>
                              <!-- <th>{{ 'Charts.Report.LPxDOM' | translate }}</th> -->
                              <th>
                                {{ "Charts.List.List Price" | translate }}
                              </th>
                              <th>{{ "Charts.Report.$/SqFt" | translate }}</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr
                              *ngFor="
                                let house of chart.activeHomes;
                                let i = index
                              "
                            >
                              <td class="related-image">
                                <div class="photo">
                                  <img
                                    src="{{
                                      house.photos[0] ? house.photos[0] : ''
                                    }}"
                                  />
                                </div>
                              </td>
                              <td>{{ house.mlsNumber }}</td>
                              <td>{{ house.address }}</td>
                              <td>{{ house.yearBuilt }}</td>
                              <td>{{ house.squareFootage | number }}</td>
                              <td>{{ house.bed }}</td>
                              <td>{{ house.bath }}</td>
                              <td>{{ house.days }}</td>
                              <!-- <td>{{ house.daysPx }}</td> -->
                              <td>
                                {{
                                  house.listPrice
                                    | convert: currentcurrency:"1.0-0"
                                }}
                              </td>
                              <td>
                                {{
                                  house.priceSqFt
                                    | convert: currentcurrency:"1.2-2"
                                }}
                              </td>
                            </tr>
                            <tr *ngIf="chart.activeHomes.length == 0">
                              <td colspan="12" style="text-align: center">
                                {{ "Charts.Report.No Data Found" | translate }}
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <!--Insertion of page break for individual listing types-->
                      <div class="pagebreak"></div>
                      <br />
                      <h3 *ngIf="showPendingTable" class="pending">
                        {{ "Charts.Report.Pending" | translate }}
                      </h3>
                      <div
                        *ngIf="showPendingTable"
                        class="table-responsive ReportClosed"
                      >
                        <table class="table table-bordered">
                          <thead class="thead-light">
                            <tr>
                              <th>{{ "Charts.Report.Photos" | translate }}</th>
                              <th>{{ "Charts.Report.MLS" | translate }}</th>
                              <th>{{ "Charts.Report.Address" | translate }}</th>
                              <th>
                                {{ "Charts.Report.Year Built" | translate }}
                              </th>
                              <th>{{ "Charts.Report.SqFt" | translate }}</th>
                              <th>{{ "Charts.Report.Bed" | translate }}</th>
                              <th>{{ "Charts.Report.Bath" | translate }}</th>
                              <th>{{ "Charts.Report.DOM" | translate }}</th>
                              <!-- <th>{{ 'Charts.Report.LPxDOM' | translate }}</th> -->
                              <th>
                                {{ "Charts.List.List Price" | translate }}
                              </th>
                              <th>{{ "Charts.Report.$/SqFt" | translate }}</th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr
                              *ngFor="
                                let house of chart.pendingHomes;
                                let i = index
                              "
                            >
                              <td class="related-image">
                                <div class="photo">
                                  <img
                                    src="{{
                                      house.photos[0] ? house.photos[0] : ''
                                    }}"
                                  />
                                </div>
                              </td>
                              <td>{{ house.mlsNumber }}</td>
                              <td>{{ house.address }}</td>
                              <td>{{ house.yearBuilt }}</td>
                              <td>{{ house.squareFootage | number }}</td>
                              <td>{{ house.bed }}</td>
                              <td>{{ house.bath }}</td>
                              <td>{{ house.days }}</td>
                              <!-- <td>{{ house.daysPx }}</td> -->
                              <td>
                                {{
                                  house.listPrice
                                    | convert: currentcurrency:"1.0-0"
                                }}
                              </td>
                              <td>
                                {{
                                  house.priceSqFt
                                    | convert: currentcurrency:"1.2-2"
                                }}
                              </td>
                            </tr>
                            <tr *ngIf="chart.pendingHomes.length == 0">
                              <td colspan="12" style="text-align: center">
                                {{ "Charts.Report.No Data Found" | translate }}
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                      <!--Insertion of page break for individual listing types-->
                      <div class="pagebreak"></div>
                      <h3 class="closed">
                        {{
                          (chart?.relatedProperty.listing_type == "Rental"
                            ? "NewCharts.Rented"
                            : "NewCharts.Closed"
                          )
                            | translate
                            | uppercase
                        }}
                      </h3>
                      <div class="table-responsive ReportClosed">
                        <table class="table table-bordered">
                          <thead class="thead-light">
                            <tr>
                              <th>{{ "Charts.Report.Photos" | translate }}</th>
                              <th>{{ "Charts.Report.MLS" | translate }}</th>
                              <th>{{ "Charts.Report.Address" | translate }}</th>
                              <th>
                                {{ "Charts.Report.Year Built" | translate }}
                              </th>
                              <th>{{ "Charts.Report.SqFt" | translate }}</th>
                              <th>{{ "Charts.Report.Bed" | translate }}</th>
                              <th>{{ "Charts.Report.Bath" | translate }}</th>
                              <th>{{ "Charts.Report.DOM" | translate }}</th>
                              <!-- <th>{{ 'Charts.Report.LPxDOM' | translate }}</th> -->
                              <th>
                                {{ "Charts.List.List Price" | translate }}
                              </th>
                              <th>
                                <span *ngIf="!rentalChartDisplay"
                                  >{{ "Charts.List.SOLD A" | translate }}
                                  {{ "Charts.List.PRICE S" | translate }}</span
                                >
                                <span *ngIf="rentalChartDisplay"
                                  >{{ "Charts.List.RENTAL A" | translate }}
                                  {{ "Charts.List.PRICE R" | translate }}</span
                                >
                              </th>
                              <th>
                                <span *ngIf="!rentalChartDisplay">{{
                                  "Charts.List.SP%LP" | translate
                                }}</span>
                                <span *ngIf="rentalChartDisplay">{{
                                  "Charts.List.RP%LP" | translate
                                }}</span>
                              </th>
                              <th>{{ "Charts.List.$/SqFt" | translate }}</th>
                              <th>
                                <span *ngIf="!rentalChartDisplay"
                                  >{{ "Charts.List.SOLD B" | translate }}
                                  {{ "Charts.List.DATE S" | translate }}</span
                                >
                                <span *ngIf="rentalChartDisplay"
                                  >{{ "Charts.List.RENTAL B" | translate }}
                                  {{ "Charts.List.DATE R" | translate }}</span
                                >
                              </th>
                            </tr>
                          </thead>
                          <tbody>
                            <tr
                              *ngFor="
                                let house of chart.closedHomes;
                                let i = index
                              "
                            >
                              <td class="related-image">
                                <div class="photo">
                                  <img
                                    src="{{
                                      house.photos[0] ? house.photos[0] : ''
                                    }}"
                                  />
                                </div>
                              </td>
                              <td>{{ house.mlsNumber }}</td>
                              <td>{{ house.address }}</td>
                              <td>{{ house.yearBuilt }}</td>
                              <td>{{ house.squareFootage | number }}</td>
                              <td>{{ house.bed }}</td>
                              <td>{{ house.bath }}</td>
                              <td>{{ house.days }}</td>
                              <!-- <td>{{ house.daysPx }}</td> -->
                              <td>
                                {{
                                  house.listPrice
                                    | convert: currentcurrency:"1.0-0"
                                }}
                              </td>
                              <td>
                                {{
                                  house.closePrice
                                    | convert: currentcurrency:"1.0-0"
                                }}
                              </td>
                              <td>
                                {{ house.salesToList | number: "1.0-2" }}%
                              </td>
                              <td>
                                {{
                                  house.priceSqFt
                                    | convert: currentcurrency:"1.2-2"
                                }}
                              </td>
                              <td>{{ house.saleDate | date: "MM/dd/yyyy" }}</td>
                            </tr>
                            <tr *ngIf="chart.closedHomes.length == 0">
                              <td colspan="12" style="text-align: center">
                                {{ "Charts.Report.No Data Found" | translate }}
                              </td>
                            </tr>
                          </tbody>
                        </table>
                      </div>
                    </div>
                    <div *ngIf="beachesFlag" class="row no-gutters">
                      <div class="col-12">
                        <div class="beachMLS">
                          <p>
                            Licensed Data Source and Copyright 2020 Beaches MLS,
                            Inc., Inc.
                          </p>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="pagebreak"></div>
                <!--About apc text report-->
                <br />
                <br />
                <div class="aboutAPC pagebreak mb-5">
                  <h3 [innerHTML]="'Charts.Report.About APC' | translate"></h3>
                  <h4
                    [innerHTML]="'Charts.Report.What is APC?' | translate"
                  ></h4>
                  <p
                    [innerHTML]="'Charts.Report.What is APC?text' | translate"
                  ></p>
                  <!-- <h4 [innerHTML]="'Charts.Report.How does APC analyze and value a property?' | translate"></h4>
                  <p
                    [innerHTML]="'Charts.Report.How does APC analyze and value a property?text1' | translate: { SALES: (chart?.relatedProperty.listing_type == 'Rental')?'RENTAL':'SALES'}">
                  </p>
                  <p [innerHTML]="'Charts.Report.How does APC analyze and value a property?text2' | translate"></p>
                  <h4 [innerHTML]="'Charts.Report.How is APC any different from a traditional CMA?' | translate"></h4>
                  <p [innerHTML]="'Charts.Report.How is APC any different from a traditional CMA?text1' | translate"></p>
                  <p [innerHTML]="'Charts.Report.How is APC any different from a traditional CMA?text2' | translate"></p>
                  <p
                    [innerHTML]="'Charts.Report.How is APC any different from a traditional CMA?text3' | translate: { SALE: (chart?.relatedProperty.listing_type == 'Rental')?'Rent':'Sale'}">
                  </p> -->
                </div>
                <!--APC logo-->
                <div class="row ReportProfiletop align-items-center">
                  <div class="col-xs-12 col-sm-3">
                    <div
                      class="estimated_mlsDetail ProfileImg mr-2"
                      *ngIf="chart"
                    >
                      <div
                        class="estimated_mlsDetail_property rptproflogo"
                        [ngStyle]="{
                          'background-image':
                            'url(' +
                            (chart.agent.logo_250X250 ||
                              'assets/images/logoDefault.png') +
                            ')'
                        }"
                      ></div>
                    </div>
                  </div>
                  <div class="col-xs-12 col-sm-6">
                    <table
                      *ngIf="chart"
                      class="table table-bordered mb-3 mb-sm-0"
                    >
                      <tbody>
                        <tr>
                          <td>{{ chart.agent.fullName }}</td>
                        </tr>
                        <tr>
                          <td>{{ chart.agent.company }}</td>
                        </tr>
                        <tr>
                          <td>{{ chart.agent.email }}</td>
                        </tr>
                        <tr *ngIf="chart.agent.phone">
                          <td>{{ chart.agent.phone }}</td>
                        </tr>
                        <tr *ngIf="chart.agent.website">
                          <td>{{ chart.agent.website }}</td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                  <div class="col-xs-12 col-sm-3">
                    <div
                      class="estimated_mlsDetail ProfileImg ml-2"
                      *ngIf="chart"
                    >
                      <div class="estimated_mlsDetail_property rptprofimg">
                        <img
                          src="{{
                            chart.agent.photo_250X250 ||
                              'assets/images/profileDefault.png'
                          }}"
                        />
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="loaderWrraper" *ngIf="loader">
  <div class="loader">
    <div class="outCircle">
      <div class="icon">
        <i class="pi pi-home"></i>
      </div>
    </div>
  </div>
</div>
